/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","sap/base/util/ObjectPath","./ViewportBase","./ViewStateManager","./ViewportRenderer","./VisibilityMode","./RenderMode","./Scene","./Camera"],function(q,O,V,a,b,d,R,S,C){"use strict";var e=V.extend("sap.ui.vk.Viewport",{metadata:{library:"sap.ui.vk",designtime:"sap/ui/vk/designtime/Viewport.designtime"}});var f=e.getMetadata().getParent().getClass().prototype;e.prototype.init=function(){if(f.init){f.init.call(this);}this._implementation=null;};e.prototype.exit=function(){this._destroyImplementation();if(f.exit){f.exit.call(this);}};e.prototype.getImplementation=function(){return this._implementation;};e.prototype._destroyImplementation=function(){if(this._implementation){var m=this.removeAllContent();var t=this;m.forEach(function(c){t.addAggregation("content",c);});this.setAggregation("safeArea",this._implementation.getSafeArea());this._implementation.destroy();this._implementation=null;}return this;};e.prototype.getShowDebugInfo=function(){if(this._implementation){return this._implementation.getShowDebugInfo();}return f.getShowDebugInfo.call(this);};e.prototype.setShowDebugInfo=function(v){f.setShowDebugInfo.call(this,v);if(this._implementation){this._implementation.setShowDebugInfo(v);}return this;};e.prototype.getBackgroundColorTop=function(){if(this._implementation){return this._implementation.getBackgroundColorTop();}return f.getBackgroundColorTop.call(this);};e.prototype.setBackgroundColorTop=function(v){f.setBackgroundColorTop.call(this,v);if(this._implementation){this._implementation.setBackgroundColorTop(v);}return this;};e.prototype.getBackgroundColorBottom=function(){if(this._implementation){return this._implementation.getBackgroundColorBottom();}return f.getBackgroundColorBottom.call(this);};e.prototype.setBackgroundColorBottom=function(v){f.setBackgroundColorBottom.call(this,v);if(this._implementation){this._implementation.setBackgroundColorBottom(v);}return this;};e.prototype.setWidth=function(v){f.setWidth.call(this,v);if(this._implementation){this._implementation.setWidth(v);}return this;};e.prototype.setHeight=function(v){f.setHeight.call(this,v);if(this._implementation){this._implementation.setHeight(v);}return this;};e.prototype.setSelectionMode=function(v){f.setSelectionMode.call(this,v);if(this._implementation){this._implementation.setSelectionMode(v);}return this;};e.prototype.getSelectionMode=function(){if(this._implementation){return this._implementation.getSelectionMode();}return f.getSelectionMode.call(this);};e.prototype.setSelectionDisplayMode=function(v){f.setSelectionDisplayMode.call(this,v);if(this._implementation){this._implementation.setSelectionDisplayMode(v);}return this;};e.prototype.getSelectionDisplayMode=function(){if(this._implementation){return this._implementation.getSelectionDisplayMode();}return f.getSelectionDisplayMode.call(this);};e.prototype.setShowSelectionBoundingBoxes=function(v){f.setShowSelectionBoundingBoxes.call(this,v);if(this._implementation){this._implementation.setShowSelectionBoundingBoxes(v);}return this;};e.prototype.getShowSelectionBoundingBoxes=function(){if(this._implementation){return this._implementation.getShowSelectionBoundingBoxes();}return f.getShowSelectionBoundingBoxes.call(this);};e.prototype.setShowSafeArea=function(v){f.setShowSafeArea.call(this,v);if(this._implementation){this._implementation.setShowSafeArea(v);}return this;};e.prototype.getShowSafeArea=function(){if(this._implementation){return this._implementation.getShowSafeArea();}return f.getShowSafeArea.call(this);};e.prototype.setKeepOutputSize=function(v){if(this._implementation&&this._implementation.setKeepOutputSize){this._implementation.setKeepOutputSize(v);}else{this.setProperty("keepOutputSize",v);}};e.prototype.getKeepOutputSize=function(){if(this._implementation&&this._implementation.getKeepOutputSize){return this._implementation.getKeepOutputSize();}return this.getProperty("keepOutputSize");};e.prototype.setCamera=function(v){f.setCamera.call(this,v);if(this._implementation){this._implementation.setCamera(v);return this;}return this;};e.prototype.getCamera=function(){if(this._implementation){return this._implementation.getCamera();}return f.getCamera.call(this);};e.prototype.setShouldRenderFrame=function(){if(this._implementation){this._implementation.setShouldRenderFrame();}return this;};e.prototype.shouldRenderFrame=function(){if(this._implementation){this._implementation.shouldRenderFrame();}};e.prototype.setRenderMode=function(v){if(this._implementation&&this._implementation.setRenderMode){this._implementation.setRenderMode(v);}return this;};e.prototype.getRenderMode=function(){if(this._implementation&&this._implementation.getRenderMode){return this._implementation.getRenderMode();}return R.Default;};e.prototype.setFreezeCamera=function(v){f.setFreezeCamera.call(this,v);if(this._implementation){this._implementation.setFreezeCamera(v);}return this;};e.prototype.showHotspots=function(n,c,m){if(this._implementation&&this._implementation.showHotspots){this._implementation.showHotspots(n,c,m);}return this;};e.prototype.addTool=function(t){this.addAssociation("tools",t);if(this._implementation){this._implementation.addTool(t);}};e.prototype.removeTool=function(t){this.removeAssociation("tools",t);if(this._implementation){this._implementation.removeTool(t);}};e.prototype.getTools=function(){if(this._implementation){return this._implementation.getTools();}return this.getAssociation("tools",[]);};e.prototype.removeAllTools=function(){this.removeAllAssociation("tools");if(this._implementation){this._implementation.removeAllTools();}};e.prototype.addContent=function(c){if(this._implementation){this._implementation.addContent(c);}else{this.addAggregation("content",c);}};e.prototype.removeContent=function(c){if(this._implementation){return this._implementation.removeContent(c);}return this.removeAggregation("content",c);};e.prototype.getContent=function(){if(this._implementation){return this._implementation.getContent();}return this.getAggregation("content");};e.prototype.removeAllContent=function(){if(this._implementation){return this._implementation.removeAllContent();}return this.removeAggregation("content");};e.prototype.setOutputSettings=function(o){if(this._implementation&&this._implementation.setOutputSettings){this._implementation.setOutputSettings(o);}else{this.setAggregation("outputSettings",o);}};e.prototype.getOutputSettings=function(){if(this._implementation&&this._implementation.getOutputSettings){return this._implementation.getOutputSettings();}return this.getAggregation("outputSettings");};e.prototype.removeOutputSettings=function(){if(this._implementation){return this._implementation.removeAggregation("outputSettings");}return this.removeAggregation("outputSettings");};e.prototype.setSafeArea=function(c){if(this._implementation){this._implementation.setSafeArea(c);}else{this.setAggregation("safeArea",c);}};e.prototype.getSafeArea=function(){if(this._implementation){return this._implementation.getSafeArea();}return this.getAggregation("safeArea");};e.prototype.removeSafeArea=function(){if(this._implementation){return this._implementation.removeAggregation("safeArea");}return this.removeAggregation("safeArea");};e.prototype.addAnnotation=function(c){if(this._implementation){this._implementation.addAnnotation(c);}else{this.addAggregation("annotations",c);}};e.prototype.destroyAnnotations=function(){if(this._implementation){return this._implementation.destroyAnnotations();}return this.destroyAggregation("annotations");};e.prototype.getAnnotations=function(){if(this._implementation){return this._implementation.getAnnotations();}return this.getAggregation("annotations");};e.prototype.getSymbolNodes=function(n){if(this._implementation&&this._implementation.getSymbolNodes){return this._implementation.getSymbolNodes(n);}return[];};e.prototype.indexOfAnnotation=function(c){if(this._implementation){return this._implementation.indexOfAnnotation(c);}return this.indexOfAggregation("annotations",c);};e.prototype.removeAllAnnotations=function(){if(this._implementation){return this._implementation.removeAllAnnotations();}return this.removeAggregation("annotations");};e.prototype.removeAnnotation=function(c){if(this._implementation){return this._implementation.removeAnnotation(c);}return this.removeAggregation("annotations",c);};e.prototype.insertAnnotation=function(c,m){if(this._implementation){return this._implementation.insertAnnotation(c,m);}return this.insertAggregation("annotations",c,m);};e.prototype.startAnimation=function(p){if(this._implementation&&this._implementation.startAnimation){this._implementation.startAnimation(p);}};e.prototype.stopAnimation=function(){if(this._implementation&&this._implementation.stopAnimation){this._implementation.stopAnimation();}};e.prototype.playProcedure=function(m,v,n){if(this._implementation&&this._implementation.playProcedure){this._implementation.playProcedure(m,v,n);}};e.prototype.getCurrentView=function(){if(this._implementation&&this._implementation.getCurrentView){return this._implementation.getCurrentView();}return null;};e.prototype.pan=function(c,m){if(this._implementation&&this._implementation.pan){this._implementation.pan(c,m);}};e.prototype.rotate=function(c,m){if(this._implementation&&this._implementation.rotate){this._implementation.rotate(c,m);}};e.prototype.zoom=function(c){if(this._implementation&&this._implementation.zoom){this._implementation.zoom(c);}};e.prototype.pauseAnimation=function(){if(this._implementation&&this._implementation.pauseAnimation){return this._implementation.pauseAnimation();}};e.prototype.resumeAnimation=function(){if(this._implementation&&this._implementation.resumeAnimation){return this._implementation.resumeAnimation();}};e.prototype.handleDragAnimation=function(c){if(this._implementation&&this._implementation.handleDragAnimation){this._implementation.handleDragAnimation(c);}};e.prototype.handleCompleteDraggingAnimation=function(c){if(this._implementation&&this._implementation.handleCompleteDraggingAnimation){this._implementation.handleCompleteDraggingAnimation(c);}};e.prototype.AddHandlersToAnimationSequenceEvents=function(c){if(this._implementation&&this._implementation.AddHandlersToAnimationSequenceEvents){this._implementation.AddHandlersToAnimationSequenceEvents(c);}};e.prototype._setContent=function(c){var m=null;var n=null;if(c){m=c;if(!(m instanceof S)){m=null;}n=c.camera;if(!(n instanceof C)){n=null;}}this._setScene(m);if(n){this.setCamera(n);}return this;};e.prototype._setScene=function(c){if(c instanceof S){var m=c.getMetadata().getName(),n=this._implementation&&this._implementation.getMetadata().getName(),r=m==="sap.ui.vk.dvl.Scene"&&n==="sap.ui.vk.dvl.Viewport"||m==="sap.ui.vk.threejs.Scene"&&n==="sap.ui.vk.threejs.Viewport"||m==="sap.ui.vk.svg.Scene"&&n==="sap.ui.vk.svg.Viewport";if(!r){this._destroyImplementation();var o;var p=this.getCamera();if(m==="sap.ui.vk.dvl.Scene"){o="sap.ui.vk.dvl.Viewport";}else if(m==="sap.ui.vk.threejs.Scene"){o="sap.ui.vk.threejs.Viewport";}else if(m==="sap.ui.vk.svg.Scene"){o="sap.ui.vk.svg.Viewport";}if(o){var t=O.get(o);this._implementation=new t({viewStateManager:this.getViewStateManager(),tools:this.getAssociation("tools"),content:this.getContent(),outputSettings:this.getOutputSettings(),safeArea:this.getSafeArea(),showSafeArea:this.getShowSafeArea(),keepOutputSize:this.getKeepOutputSize(),showDebugInfo:this.getShowDebugInfo(),width:this.getWidth(),height:this.getHeight(),backgroundColorTop:this.getBackgroundColorTop(),backgroundColorBottom:this.getBackgroundColorBottom(),selectionMode:this.getSelectionMode(),selectionDisplayMode:this.getSelectionDisplayMode(),showSelectionBoundingBoxes:this.getShowSelectionBoundingBoxes(),freezeCamera:this.getFreezeCamera(),renderMode:this.getRenderMode(),contentConnector:this.getContentConnector()});if(p){this._camera=null;this._implementation.setCamera(p);}this._implementation.setParent(this);}this.invalidate();}}else{this._destroyImplementation();this.invalidate();}return this;};e.prototype.onSetViewStateManager=function(v){if(this._implementation){this._implementation.setViewStateManager(v);}};e.prototype.onUnsetViewStateManager=function(v){if(this._implementation){this._implementation.setViewStateManager(null);}};e.prototype.activateView=function(v,p,n){if(this._implementation){this._implementation.activateView(v,p,n);return this;}else{q.sap.log.error("no implementation");return this;}};e.prototype.resetCurrentView=function(){if(this._implementation&&this._implementation.resetCurrentView){this._implementation.resetCurrentView();return this;}else{q.sap.log.error("no implementation");return this;}};e.prototype.zoomTo=function(w,n,c,m){if(this._implementation){this._implementation.zoomTo(w,n,c,m);}else{q.sap.log.error("zoomTo: no implementation");}return this;};e.prototype.tap=function(x,y,c){if(this._implementation){this._implementation.tap(x,y,c);}return this;};e.prototype.tapObject=function(n){if(this._implementation&&this._implementation.tapObject){this._implementation.tapObject(n);}return this;};var s=function(c){c.camera={};};var g=function(c){if(typeof c.camera==="object"&&c.camera!==null){c.camera.matrices=false;}};var h=function(c){if(typeof c.camera==="object"&&c.camera!==null){c.camera.useTransitionCamera=false;}};var i=function(c){c.animation=true;};var j=function(c){c.visibility=false;};var k=function(c){if(typeof c.visibility==="object"&&c.visibility!==null){c.visibility.mode=d.Complete;}};var l=function(c){c.selection=false;};e.prototype.getViewInfo=function(c){if(!this._implementation){q.sap.log.error("no implementation");return null;}var m={};if(typeof c!=="object"||c===null){s(m);g(m);h(m);i(m);j(m);k(m);l(m);}else{if(typeof c.camera==="object"&&c.camera!==null){m.camera={};if(typeof c.camera.matrices==="boolean"){m.camera.matrices=c.camera.matrices;}else if("matrices"in c.camera){m.camera.matrices=false;}else{g(m);}if(typeof c.camera.useTransitionCamera==="boolean"){m.camera.useTransitionCamera=c.camera.useTransitionCamera;}else if("useTransitionCamera"in c.camera){m.camera.useTransitionCamera=false;}else{h(m);}}else if(typeof c.camera==="boolean"){if(c.camera===true){m.camera={};g(m);h(m);}else{m.camera=false;}}else if("camera"in c){m.camera=false;}else{s(m);g(m);h(m);}if(typeof c.animation==="boolean"){m.animation=c.animation;}else if("animation"in c){m.animation=false;}else{i(m);}if(typeof c.visibility==="object"&&c.visibility!==null){m.visibility={};if(c.visibility.mode===d.Complete||c.visibility.mode===d.Differences){m.visibility.mode=c.visibility.mode;}else{k(m);}}else if(typeof c.visibility==="boolean"){if(c.visibility===true){m.visibility={};k(m);}else{m.visibility=false;}}else if("visibility"in c){m.visibility=false;}else{j(m);k(m);}if(typeof c.selection==="boolean"){m.selection=c.selection;}else if("selection"in c){m.selection=false;}else{l(m);}}return this._implementation.getViewInfo(m);};e.prototype.setViewInfo=function(v,c){if(this._implementation){this._implementation.setViewInfo(v,c);}else{q.sap.log.error("no implementation");}return this;};e.prototype.getImage=function(w,c,t,m,n){if(this._implementation&&this._implementation.getImage){return this._implementation.getImage(w,c,t,m,n);}return null;};e.prototype.projectToScreen=function(x,y,z,c){if(this._implementation&&this._implementation.projectToScreen){return this._implementation.projectToScreen(x,y,z,c);}return f.projectToScreen(x,y,z,c);};e.prototype.normalizeRectangle=function(x,y,w,c){if(this._implementation&&this._implementation.normalizeRectangle){return this._implementation.normalizeRectangle(x,y,w,c);}return f.normalizeRectangle(x,y,w,c);};e.prototype.deNormalizeRectangle=function(x,y,w,c){if(this._implementation&&this._implementation.deNormalizeRectangle){return this._implementation.deNormalizeRectangle(x,y,w,c);}return f.deNormalizeRectangle(x,y,w,c);};return e;});
