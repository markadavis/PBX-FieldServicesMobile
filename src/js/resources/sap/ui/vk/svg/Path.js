/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/base/Log","./Element"],function(L,E){"use strict";var P=function(a){a=a||{};E.call(this,a);this.type="Path";this.segments=a.segments||[];if(a.isTriangleMesh){this.isTriangleMesh=true;}this.setMaterial(a.material);};P.prototype=Object.assign(Object.create(E.prototype),{constructor:P});P.prototype.tagName=function(){return"path";};P.prototype.isFillable=function(){return this.isTriangleMesh;};function p(a,d,r,g,h){var x=a+r*Math.cos(h);var y=d+g*Math.sin(h);return{x:x,y:y};}P.prototype._expandBoundingBox=function(d,m){var s=this.strokeWidth*0.5;for(var g=0,h=this.segments.length;g<h;g++){var j=this.segments[g];var k=j.points;switch(j.type){case"arc":if(k){this._expandBoundingBoxCE(d,m,k[0],k[1],s,s);}else{for(var a=0,n=6;a<n;a++){var o=p(j.cx,j.cy,j.rx,j.ry,j.start+(j.end-j.start)*a/(n-1));this._expandBoundingBoxCE(d,m,o.x,o.y,s,s);}if(j.closed){this._expandBoundingBoxCE(d,m,j.cx,j.cy,s,s);}}break;case"line":case"move":this._expandBoundingBoxCE(d,m,k[0],k[1],s,s);break;case"bezier":case"polyline":case"mesh":for(var i=0,l=k.length-1;i<l;i+=2){this._expandBoundingBoxCE(d,m,k[i],k[i+1],s,s);}break;default:break;}}};function b(d,s){var i,l;var a=s.points;d.push("M",a[0],a[1]);switch(s.degree){case 2:for(i=2,l=a.length-3;i<l;i+=4){d.push("Q",a[i],a[i+1],a[i+2],a[i+3]);}break;case 3:for(i=2,l=a.length-5;i<l;i+=6){d.push("C",a[i],a[i+1],a[i+2],a[i+3],a[i+4],a[i+5]);}break;default:L.warning("Unsupported bezier segment degree:",s.type);break;}}function c(d,s){var a=s.points;d.push("M",a[0],a[1]);for(var i=2,l=a.length-1;i<l;i+=2){d.push("L",a[i],a[i+1]);}if(s.closed){d.push("Z");}}function e(d,s){var a=s.points;for(var i=0,l=a.length-5;i<l;i+=6){d.push("M",a[i],a[i+1],"L",a[i+2],a[i+3],"L",a[i+4],a[i+5],"Z");}}function f(d,s){var a=s.points;if(a){d.push("A",s.major,s.minor,"0",s.followLargeArc?"1":"0",s.clockwise?"1":"0",a[0],a[1]);}else{var g=p(s.cx,s.cy,s.rx,s.ry,s.start);var h=p(s.cx,s.cy,s.rx,s.ry,s.end);d.push("M",g.x,g.y,"A",s.rx,s.ry,"0",Math.abs(s.end-s.start)<Math.PI?"0":"1",s.end>s.start?"1":"0",h.x,h.y);if(s.closed){d.push("L",s.cx,s.cy,"Z");}}}P.prototype._setSpecificAttributes=function(s){var d=[];this.segments.forEach(function(a){switch(a.type){case"arc":f(d,a);break;case"line":d.push("L",a.points[0],a.points[1]);break;case"move":d.push("M",a.points[0],a.points[1]);break;case"close":d.push("Z");break;case"bezier":b(d,a);break;case"polyline":c(d,a);break;case"mesh":e(d,a);break;default:L.warning("Unsupported path segment type:",a.type,JSON.stringify(a));break;}});if(d.length>0){s("d",d.join(" "));}if(!this.isTriangleMesh){s("stroke-linejoin","round");}};return P;});
