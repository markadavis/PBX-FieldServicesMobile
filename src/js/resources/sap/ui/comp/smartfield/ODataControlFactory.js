/*
 * SAPUI5

		(c) Copyright 2009-2020 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/core/library","sap/m/library","sap/ui/comp/library","sap/ui/model/BindingMode","sap/m/TextArea","sap/m/Link","sap/m/CheckBox","sap/m/ComboBox","sap/m/DatePicker","sap/m/DateTimePicker","sap/m/FlexItemData","sap/m/HBox","sap/m/Input","sap/m/Select","sap/m/Text","sap/ui/core/Renderer","sap/ui/comp/navpopover/SmartLink","./ControlFactoryBase","./FieldControl","./ODataControlSelector","./ODataHelper","./ODataTypes","./TextArrangementDelegate","sap/m/ObjectNumber","sap/m/ObjectIdentifier","sap/m/ObjectStatus","sap/m/TimePicker","sap/ui/comp/navpopover/SemanticObjectController","sap/ui/comp/util/FormatUtil","sap/ui/comp/smartfield/Configuration","sap/ui/comp/odata/MetadataAnalyser","sap/ui/comp/odata/FiscalMetadata","sap/ui/comp/navpopover/NavigationPopoverHandler","sap/ui/core/InvisibleText","sap/base/Log","sap/base/assert","sap/base/security/URLWhitelist","sap/base/util/merge","sap/base/strings/capitalize","sap/base/util/deepClone"],function(c,m,l,B,T,L,C,a,D,b,F,H,I,S,d,R,f,g,h,O,j,k,o,p,q,r,s,t,u,v,M,w,N,x,y,z,U,A,E,G){"use strict";var V=c.ValueState;var J=c.TextAlign;var K=m.InputType;var P=m.FlexJustifyContent;var Q=l.smartfield.CriticalityRepresentationType;var W=l.smartfield.ControlContextType;var X=c.TextDirection;var Y=m.FlexAlignContent;var Z;var $=g.extend("sap.ui.comp.smartfield.ODataControlFactory",{constructor:function(e,i,n){g.call(this,e,i);this.sName="ODataControlFactory";this._oMetaData={annotations:{}};this._oMeta=n;this._oHelper=new j(e,this._oBinding);this._oFieldControl=new h(i,this._oHelper);this._oTypes=new k(i);this._oSelector=new O(this._oMetaData,i,this._oTypes);this.oTextArrangementDelegate=new o(this);this._bInitialized=false;this.bPending=false;this._oAmountInputFlexItemData=null;this._oUOMInputFlexItemData=null;this._oUOMTextFlexItemData=null;this.oMeasureField=null;Z=sap.ui.require("sap/ui/comp/smartfield/SmartField");if(!Z){throw new Error("SmartField module not loaded for "+this);}}});$.prototype._init=function(e){this._oMetaData.model=e.model;this._oMetaData.path=e.path;this._oMetaData.entitySet=e.entitySetObject||this._oHelper.oMeta.getODataEntitySet(e.entitySet);if(this._oHelper.oMeta){z(this._oMetaData.entitySet,'The entity set named "'+e.entitySet+'" was not found in the "'+this._oHelper.oMeta.getODataEntityContainer().name+'" entity container of the service metadata document. - '+this.getMetadata().getName());}this._oMetaData.entityType=e.entityType||this._oHelper.oMeta.getODataEntityType(this._oMetaData.entitySet.entityType);this._oMetaData.navigationPath=e.navigationPath||null;if(this._oModel){this._oHelper.checkNavigationProperty(this._oMetaData,this._oParent);this._oHelper.getProperty(this._oMetaData);var i=this.getEdmProperty();z(!!i,'The EDM property "'+e.path+'" was not found in the "'+this._oMetaData.entityType.namespace+"."+this._oMetaData.entityType.name+'" entity type. - '+this.getMetadata().getName());if(i){this._oMetaData.annotations.text=this._oHelper.getTextProperty2(this._oMetaData);this._oMetaData.annotations.uom=this._oHelper.getUnitOfMeasure2(this._oMetaData);this._oHelper.getValueListData(this._oMetaData);this._oMetaData.annotations.lineitem=this._oHelper.getAnalyzer().getLineItemAnnotation(this._oMetaData.entitySet.entityType);this._oHelper.getUOMValueListAnnotationPath(this._oMetaData);this._oMetaData.annotations.semantic=M.getSemanticObjectsFromProperty(i);this._oMetaData.annotations.semanticKeys=this._oHelper.getAnalyzer().getSemanticKeyAnnotation(this._oMetaData.entitySet.entityType);if(this._oMetaData.annotations.uom){this._oMetaData.annotations.uom.annotations={};this._oHelper.getValueListData(this._oMetaData.annotations.uom);}this._oHelper.getUOMTextAnnotation(this._oMetaData);if(this._oParent&&this._oParent.getExpandNavigationProperties()){var n=this._oParent.getBindingContext(),_=n&&n.getObject(),a1=_&&_.__metadata.created;if(!a1){var b1=this._oHelper.getAutoExpandProperties(i);if(b1.length>0){this._oParent.bindElement({path:"",parameters:{expand:b1,select:b1}});}}}}}else{this._oMetaData.modelObject=e.modelObject;this._oMetaData.property=e.property;this._oMetaData.property.valueListAnnotation=null;this._oMetaData.property.valueListKeyProperty=null;this._oMetaData.property.valueListEntitySet=null;this._oMetaData.property.valueListEntityType=null;this._oMetaData.annotations.text=e.annotations.text;this._oMetaData.annotations.uom=e.annotations.uom;if(this._oMetaData.annotations.uom&&!this._oMetaData.annotations.uom.annotations){this._oMetaData.annotations.uom.annotations={};}this._oMetaData.annotations.valuelist=e.annotations.valuelist;this._oMetaData.annotations.valuelistType=e.annotations.valuelistType;this._oMetaData.annotations.lineitem=e.annotations.lineitem;this._oMetaData.annotations.semantic=e.annotations.semantic;this._oMetaData.annotations.valuelistuom=e.annotations.valuelistuom;}};$.prototype._initValueList=function(e){var i=this._oMetaData.property,n=e.primaryValueListAnnotation;this._oMetaData.annotations.valueListData=n;i.valueListAnnotation=n;i.valueListKeyProperty=this._oHelper.getODataValueListKeyProperty(n);i.valueListEntitySet=this._oHelper.oMeta.getODataEntitySet(n.valueListEntitySetName);i.valueListEntityType=this._oHelper.oMeta.getODataEntityType(this._oHelper.oMeta.getODataEntitySet(n.valueListEntitySetName).entityType);};$.prototype._getTextArrangementType=function(){var e=null,i=o.getPaths("ValueList",this._oMetaData);if(i.keyField&&i.descriptionField){e=this._oTypes.getType(this._oMetaData.property,null,null,{composite:true,keyField:i.keyField,descriptionField:i.descriptionField,valueListNoValidation:this._oParent._getComputedTextInEditModeSource()==="ValueListNoValidation"});if(!(e.isA("sap.ui.comp.smartfield.type.TextArrangementString")||e.isA("sap.ui.comp.smartfield.type.TextArrangementGuid"))){e=null;}}return e;};$.prototype._createEdmDisplay=function(){var i,n,_,a1,b1=false,c1="getText",d1=this,e1={width:true,textAlign:true},f1=this.getEdmProperty(),g1=this._oParent.data("configdata"),h1=((g1&&(g1.isInnerControl!==true))||this._oParent.isContextTable()),i1=this._oSelector.checkComboBox(h1);if(f1){a1=this._oHelper.oAnnotation.getText(f1);}if(this._checkLink()&&!this._oSelector.useObjectIdentifier()){return this._createLink();}var j1=this.createAttributes(null,this._oMetaData.property,e1),k1=this._oSelector.checkDatePicker()||(f1?f1.type.startsWith("Edm.Date"):false);this.oType=null;if(k1){var l1=this.getFormatSettings("dateFormatSettings"),m1;try{m1=G(l1);}catch(e){m1=l1;}if(m1&&f1&&f1.type==="Edm.DateTimeOffset"){m1.UTC=false;}this.oType=this._oTypes.getType(this._oMetaData.property,m1);j1.text={model:this._oMetaData.model,path:this._oMetaData.path,type:this.oType};}else{if(this._bTextInDisplayModeValueList&&this._oMetaData.property&&this._oMetaData.property.valueListAnnotation){this.oType=this._getTextArrangementType();}if(!this.oType){this.oType=this._oTypes.getType(this._oMetaData.property);}j1.text={model:this._oMetaData.model,path:this._oHelper.getEdmDisplayPath(this._oMetaData),type:this.oType};}if(f1){n=this._oHelper.oAnnotation.isMasked(f1);if(n){j1.text.formatter=k.maskValue;}if(a1){_=this._oSelector.useObjectIdentifier(k1,n);if(_){delete j1.width;delete j1.textAlign;j1.text={path:this._oMetaData.path};j1.title={path:this._oHelper.getEdmDisplayPath(this._oMetaData)};if(this._oParent.hasListeners("press")){j1.titleActive=true;j1.titlePress=function(r1){d1._oParent.firePress(r1);};}else if(this._oMetaData.annotations.semantic&&this._oMetaData.annotations.semantic.defaultSemanticObject){var n1;var o1;var p1=this._oMetaData.annotations.semantic.additionalSemanticObjects.concat(this._oMetaData.annotations.semantic.defaultSemanticObject);t.getDistinctSemanticObjects().then(function(r1){n1=t.hasDistinctSemanticObject(p1,r1);if(n1){var s1=d1._oParent.getBindingInfo("value");var t1=s1.parts[0].path;var u1=d1._oHelper.oAnnotation.getLabel(d1._oMetaData.property.property);if(d1._oMetaData.annotations.lineitem&&d1._oMetaData.annotations.lineitem.labels&&d1._oMetaData.annotations.lineitem.labels[t1]){u1=d1._oMetaData.annotations.lineitem.labels[t1];}o1=new N({semanticObject:d1._oMetaData.annotations.semantic.defaultSemanticObject,additionalSemanticObjects:d1._oMetaData.annotations.semantic.additionalSemanticObjects,semanticObjectLabel:u1,fieldName:t1,navigationTargetsObtained:function(v1){var w1=sap.ui.getCore().byId(v1.getSource().getControl());var x1=v1.getParameters().mainNavigation;if(x1){x1.setDescription(w1.getText());}v1.getParameters().show(w1.getTitle(),x1,undefined,undefined);}});}});j1.titleActive={path:"$sapuicompsmartfield_distinctSO>/distinctSemanticObjects",formatter:function(r1){return t.hasDistinctSemanticObject(p1,r1);}};j1.titlePress=function(r1){if(n1&&o1){o1.setControl(r1.getSource(r1.getParameter("domRef")));o1.openPopover();}};}}else if(!(g1&&(g1.isInnerControl===true))){j1.text={};j1.text.parts=[];j1.text.parts.push(this._oMetaData.path);j1.text.parts.push(this._oHelper.getEdmDisplayPath(this._oMetaData));j1.text.formatter=function(r1,s1){if(i1.combobox){return d1._formatDisplayBehaviour("defaultComboBoxReadOnlyDisplayBehaviour",r1,s1);}if(d1.oType&&!d1._bTextInDisplayModeValueList){r1=d1.oType.formatValue(r1,"string");}return d1._formatDisplayBehaviour("defaultInputFieldDisplayBehaviour",r1,s1);};}}else if(this._oSelector.checkCheckBox()){j1.text.formatter=function(r1){return d1._formatDisplayBehaviour("defaultCheckBoxDisplayBehaviour",r1);};}}if(_){i=new q(this._oParent.getId()+"-objIdentifier",j1);if(this._oMetaData.annotations.semantic){i.setModel(t.getJSONModel(),"$sapuicompsmartfield_distinctSO");}}else{if(j1.text.type&&j1.text.type.isA("sap.ui.comp.smartfield.type.DateTime")&&j1.text.type.oConstraints&&j1.text.type.oConstraints.isDateOnly){j1.wrapping=false;}if(this._oParent.isContextTable()&&sap.ui.getCore().getConfiguration().getRTL()){j1.textDirection="LTR";}i=new d(this._oParent.getId()+"-text",j1);b1=this._oSelector._checkComboBox(h1).combobox&&(this._oParent.getFetchValueListReadOnly()||(a1===undefined));if(b1){c1=null;}}if(_&&g1&&g1.configdata&&g1.configdata.onText){delete g1.configdata.onText;}var q1={control:i,onCreate:"_onCreate",params:{getValue:c1,noValidations:true,type:null}};if(this.oType){q1.type={type:this.oType,property:this._oMetaData.property};}return q1;};$.prototype._createEdmTime=function(){var e=this.getFormatSettings("dateFormatSettings"),n={width:true,placeholder:true,valueState:true,valueStateText:true};var i=$.getBoundPropertiesMapInfoForControl(s.getMetadata().getName(),{propertyName:"value"})[0];var _={valueFormat:"HH:mm:ss"};_=Object.assign(_,this.createAttributes(i,this._oMetaData.property,n,{event:"change",parameter:"value"}));if(_.width===""){_.width="100%";}if(e){_[i].type=this._oTypes.getType(this._oMetaData.property,e);}var a1=new s(this._oParent.getId()+"-timePicker",_);return{control:a1,onCreate:"_onCreate",params:{getValue:"getValue",type:{type:_.value.type,property:this._oMetaData.property}}};};$.prototype._createObjectStatus=function(){var e=this.createAttributes(null,this._oMetaData.property,null),i=this._oHelper.oAnnotation.getText(this.getEdmProperty());var n=$.getBoundPropertiesMapInfoForControl(r.getMetadata().getName(),{propertyName:"value"})[0];if(i){e[n]={parts:[this._oHelper.getEdmDisplayPath(this._oMetaData)]};}else{e[n]={model:this._oMetaData.model,path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)};}this._addObjectStatusAttributes(e);var _=new r(this._oParent.getId()+"-objStatus",e);return{control:_,onCreate:"_onCreate",params:{getValue:"getText",noValidation:true}};};$.prototype._addObjectStatusAttributes=function(e){var i,n=this._oParent.getControlProposal(),_=n.getObjectStatus();if(_){i=_.getBindingInfo("criticality");}var a1=function(c1){var d1={0:V.None,1:V.Error,2:V.Warning,3:V.Success};var e1={"com.sap.vocabularies.UI.v1.CriticalityType/Neutral":V.Neutral,"com.sap.vocabularies.UI.v1.CriticalityType/Negative":V.Warning,"com.sap.vocabularies.UI.v1.CriticalityType/Critical":V.Error,"com.sap.vocabularies.UI.v1.CriticalityType/Positive":V.Success};return e1[c1]||d1[c1]||V.None;};var b1=function(){var c1,d1={"Error":"sap-icon://status-negative","Warning":"sap-icon://status-critical","Success":"sap-icon://status-positive","None":"sap-icon://status-inactive"};if(i){if(i.formatter){c1=i.formatter.apply(null,arguments);}else{c1=arguments[0];}}else{c1=_.getCriticality();}if((c1===undefined)||(c1===null)){return null;}return d1[a1(c1)];};if(i){e.state={formatter:function(){var c1;if(i.formatter){c1=i.formatter.apply(null,arguments);}else{c1=arguments[0];}return a1(c1);},parts:i.parts};if(_.getCriticalityRepresentationType()!==Q.WithoutIcon){e.icon={formatter:b1,parts:i.parts};}}else{if(_){e.state=a1(_.getCriticality());if(_.getCriticalityRepresentationType()!==Q.WithoutIcon){e.icon=b1();}}else{e.icon=b1();}}};$.prototype._createEdmString=function(){var e={};if(this._oSelector.checkCheckBox()){return this._createCheckBox();}var i=this._oSelector.checkSelection();if(i.selection){return this._createSelect({valueHelp:$.getValueHelpDropdownSettings(i)});}i=this._oSelector.checkComboBox();if(i.combobox){return this._createComboBox({valueHelp:$.getValueHelpDropdownSettings(i),edit:true});}var n={width:true,textAlign:true,placeholder:true,tooltip:true,name:true,valueState:true,valueStateText:true};var _=this.getEdmProperty();if(this._oHelper.oAnnotation.isMultiLineText(_)){delete n["width"];return this._createMultiLineText({attributesNamesMap:n});}var a1=this._oParent.isTextInEditModeSourceNotNone(),b1=/Edm.String|Edm.Guid/.test(_.type);if(a1||this._bTextInDisplayModeValueList){z(b1,"The ValueList and NavigationProperty"+"members of the sap.ui.comp.smartfield.TextInEditModeSource enumeration are only supported for OData "+"EDM Properties typed as Edm.String or Edm.Guid. - "+this.getMetadata().getName());}var c1=$.getBoundPropertiesMapInfoForControl(I.getMetadata().getName(),{propertyName:"value"})[0];var d1=this._oParent._getComputedTextInEditModeSource(),e1,f1;if(this._oParent.data("defaultTextInEditModeSource")&&this._oParent.isPropertyInitial("textInEditModeSource")&&this._oParent.getMode()==="edit"){e1=true;}this.oTextArrangementDelegate.bValidMetadata=b1&&this.oTextArrangementDelegate.checkRequiredMetadata(d1,e1);if(this.oTextArrangementDelegate.bValidMetadata){f1=this.createAttributes("",this._oMetaData.property,n);if(this._oHelper.oAnnotation.isUpperCase(this._oMetaData.property.property)){e.sDisplayFormat="UpperCase";}e.valueListNoValidation=this._oParent._getComputedTextInEditModeSource()==="ValueListNoValidation";f1[c1]=this.oTextArrangementDelegate.getBindingInfo(e);}else{f1=this.createAttributes(c1,this._oMetaData.property,n);}if(w.isFiscalValue(_)){f1.placeholder=f1.value.type.formatter.getPattern();return{control:new I(this._oParent.getId()+"-input",f1),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:f1.value.type,property:this._oMetaData.property}}};}var g1=new I(this._oParent.getId()+"-input",f1);if(this._oHelper.oAnnotation.isMasked(_)){g1.setType(K.Password);}var h1=this.getCustomDataConfiguration();if(this.oTextArrangementDelegate.bValidMetadata){this._handleEventingForTextArrangement({control:g1});}else{this._handleEventingForEdmString({control:g1,edmProperty:this._oMetaData.property.property,currency:h1&&h1.currency});}return{control:g1,onCreate:"_onCreate",params:{valuehelp:{annotation:i.annotation,noDialog:!this._oParent.getShowValueHelp(),noTypeAhead:!this._oParent.getShowSuggestion(),aggregation:"suggestionRows"},getValue:"getValue",type:{type:f1.value.type,property:this._oMetaData.property}}};};$.getValueHelpDropdownSettings=function(e){return{annotation:e.annotation,noDialog:true,noTypeAhead:true};};$.prototype._getMaxLength=function(){return this._oTypes.getMaxLength(this._oMetaData.property,this._oParent.getBindingInfo("value"));};$.prototype._addAriaLabelledBy=function(e){var i,n,_;if((this._oParent.getControlContext()===W.None)||(this._oParent.getControlContext()===W.Form)||(this._oParent.getControlContext()===W.SmartFormGrid)){g.prototype._addAriaLabelledBy.apply(this,arguments);_=this._oParent.data("configdata");if(_&&_.configdata.isInnerControl&&_.configdata.isUOM){if(e){n=e.control;if(n instanceof H){if(n.getItems().length>0){n=n.getItems()[0];}}}if(n&&n.getAriaLabelledBy&&n.getAriaLabelledBy().length===0){var a1=this.getEdmProperty();if(this._oHelper.oAnnotation.getLabel(a1)){i=new x({text:this._oHelper.oAnnotation.getLabel(a1)});n.addAriaLabelledBy(i);this._oParent.addAggregation("_ariaLabelInvisibleText",i);}}}}};$.prototype._handleEventingForEdmString=function(e){var i=e.control;if(!i){return;}var n=this._oHelper.oAnnotation.isUpperCase(e.edmProperty);i.attachChange(function g1(_){var a1={},b1=_&&_.getParameters(),c1=_&&_.getSource();if(b1){var d1=b1.value;if(n&&d1){d1=d1.toUpperCase();i.setValue(d1);}a1.value=d1;a1.newValue=d1;if(b1.validated){a1.validated=b1.validated;}if(i._oSuggestionPopup&&i._oSuggestionPopup.isOpen()){if(!b1.validated){if(i._iPopupListSelectedIndex>=0){return;}}}if(e.currency){var e1=this.getCurrencyValidationSettings();e1.oSource=c1;this.updateModelPropertiesForCurrency("value",e1);}try{this._oParent.fireChange(a1);}catch(f1){y.error(f1);}}}.bind(this));};$.prototype._handleEventingForTextArrangement=function(e){var i=e.control;if(!i){return;}i.attachChange(function(n){try{this._oParent.fireChange(arguments);}catch(_){y.error(_);}}.bind(this));};$.prototype.getUOMChangeHandler=function(e){return function(i){try{var n=e.smartFieldRootControl,_=i.getParameters(),a1=_.value,b1=i.getSource();if(e.currency){var c1=this.getCurrencyValidationSettings(e);c1.oSource=b1;this.updateModelPropertiesForCurrency("value",c1);}n.fireChange({value:a1,newValue:a1,unitChanged:!!e.unit,validated:!!_.validated});}catch(d1){y.error(d1);}}.bind(this);};$.prototype.getCurrencyValidationSettings=function(e){var i;if(e){i=e.smartFieldRootControl;}else{var n=this.getCustomDataConfiguration();i=n&&n.smartFieldRootControl;}var _=i.getInnerControls();return{amountField:_[0],currencyField:_[1],errorState:i._oError,checkValidity:i.checkValuesValidity.bind(i),rootControl:i};};$.prototype.updateModelPropertiesForCurrency=function(e,i){var n=i.amountField,_=i.currencyField,a1=i.oSource,b1=n.getValue(),c1,d1="";if(_){var e1=_.getMetadata().getName();c1=$.getBoundPropertiesMapInfoForControl(e1,{propertyName:e})[0];var f1="get"+E(c1);d1=_[f1]();}var g1=[b1,d1];var h1={rawValues:g1,handleSuccess:false};var i1=i.checkValidity(h1);function j1(m1){var n1=n.getModel(),o1=n.getBinding(e),p1,q1;if(_){p1=_.getBinding(c1);q1=p1.getType();}var r1=o1.getType(),s1=o1.getExternalValue(),t1=p1&&p1.getExternalValue(),u1=r1.parseValue(b1,"string",g1),v1=u1[1],w1=r1.formatValue(u1,"string"),x1=q1&&q1.formatValue(v1,"string");if(n1.getDefaultBindingMode()===B.TwoWay){if(!m1){o1.setValue(u1);}}if(!m1){n.setValue(w1);}var y1=false,z1=true;if(o1.hasValidation()&&!m1){var A1={element:n,property:e,type:r1,newValue:w1,oldValue:s1,mParameters:{originSource:a1}};n.fireValidationSuccess(A1,y1,z1);}if(p1&&p1.hasValidation()){var B1={element:_,property:c1,type:q1,newValue:x1,oldValue:t1,mParameters:{originSource:a1}};_.fireValidationSuccess(B1,y1,z1);}}function k1(m1){}function l1(){var m1=i.errorState;if(m1.bComplex&&m1.bFirst&&m1.bSecond){var n1=n.getBinding(e).getExternalValue();g1=[n1,d1];var h1={rawValues:g1,innerControls:[_],handleSuccess:false};var i1=i.checkValidity(h1);i1.then(j1.bind(this,true)).catch(k1);}}i1.then(j1).catch(k1).finally(l1);};$.prototype._createComboBox=function(e){var i=null,n={width:true,textAlign:true,placeholder:true,tooltip:true,name:true,valueState:true};var _=$.getBoundPropertiesMapInfoForControl(a.getMetadata().getName(),{propertyName:"value"})[0];var a1={change:this._oHelper.getDropdownChangeHandler(this._oParent)};a1=Object.assign(a1,this.createAttributes(_,this._oMetaData.property,n));if(a1.width===""){a1.width="100%";}if(e.edit){i=new a(this._oParent.getId()+"-comboBoxEdit",a1);}else{i=this._createDisplayedComboBox(a1);}return{control:i,onCreate:"_onCreate",params:{valuehelp:{annotation:e.valueHelp.annotation,aggregation:"items",noDialog:e.valueHelp.noDialog,noTypeAhead:e.valueHelp.noTypeAhead},getValue:"getSelectedKey",type:{type:a1.selectedKey.type,property:this._oMetaData.property}}};};$.prototype._createDisplayedComboBox=function(e){var i=a.extend("sap.ui.comp.smartfield.DisplayComboBox",{metadata:{library:"sap.ui.comp",properties:{wrapping:{type:"boolean",group:"Appearance",defaultValue:true}}},renderer:function(n,_){var a1=_.getWidth(),b1=_.getValue(),c1=_.getTextDirection(),d1=_.getTextAlign(),e1=_.getTooltip_AsString(),f1=_.getWrapping();n.write("<span");n.writeControlData(_);n.addClass("sapMText");n.addClass("sapUiSelectable");if(f1){if(b1&&(b1.length>0)&&!/\s/.test(b1)){n.addClass("sapMTextBreakWord");}}else{n.addClass("sapMTextNoWrap");}if(a1&&(b1!=="")){n.addStyle("width",a1);}else{n.addClass("sapMTextMaxWidth");}if(c1!==X.Inherit){n.writeAttribute("dir",c1.toLowerCase());}if(e1){n.writeAttributeEscaped("title",e1);}if(d1){d1=R.getTextAlign(d1,c1);if(d1){n.addStyle("text-align",d1);}}var g1=f1?"sapMTextRenderWhitespaceWrap":"sapMTextRenderWhitespace";n.addClass(g1);n.writeClasses();n.writeStyles();n.write(">");b1.replace(/\r\n|\n\r|\r/g,"\n");n.writeEscaped(b1);n.write("</span>");},updateDomValue:function(n){if(!this.isActive()){return this;}n=this._getInputValue(n);if(this.$().text()!==n){this.$().text(n);this._bCheckDomValue=true;}return this;},getValue:function(){return this.getProperty("value");},getFocusDomRef:function(){return this.getDomRef();},getEditable:function(){return false;}});return new i(this._oParent.getId()+"-comboBoxDisp",e);};$.prototype._createSelect=function(e){var n={width:true,name:true,valueState:true};var i=$.getBoundPropertiesMapInfoForControl(S.getMetadata().getName(),{propertyName:"value"})[0];var _={change:this._oHelper.getDropdownChangeHandler(this._oParent),forceSelection:false};_=Object.assign(_,this.createAttributes(i,this._oMetaData.property,n));if(_.width===""){_.width="100%";}return{control:new S(this._oParent.getId()+"-select",_),onCreate:"_onCreate",params:{valuehelp:{annotation:e.valueHelp.annotation,aggregation:"items",noDialog:e.valueHelp.noDialog,noTypeAhead:e.valueHelp.noTypeAhead},getValue:"getSelectedKey",type:{type:_.selectedKey.type,property:this._oMetaData.property}}};};$.prototype._createCheckBox=function(){var e=$.getBoundPropertiesMapInfoForControl(C.getMetadata().getName(),{propertyName:"value"})[0];var i=this.createAttributes(e,null,{},{event:"select",parameter:"selected"});i.editable=(this._oParent.getEditable()&&this._oParent.getEnabled()&&this._oParent.getContextEditable());i.selected.type=this._oTypes.getAbapBoolean();return{control:new C(this._oParent.getId()+"-cBox",i),onCreate:"_onCreate",params:{getValue:"getSelected"}};};$.prototype._createEdmDateTime=function(){var e=this.getFormatSettings("dateFormatSettings"),i;var n={width:true,textAlign:true,placeholder:true,name:true,valueState:true};var _=this.createAttributes(null,this._oMetaData.property,n,{event:"change",parameter:"value"});if(this._oSelector.checkDatePicker()){i=$.getBoundPropertiesMapInfoForControl(D.getMetadata().getName(),{propertyName:"value"})[0];_[i]={path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property,e,{displayFormat:"Date"}),model:this._oMetaData.model,mode:this._oParent.getBindingMode("value")};if(e&&e.style){_.displayFormat=e.style;}return{control:new D(this._oParent.getId()+"-datePicker",_),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:_.value.type,property:this._oMetaData.property}}};}i=$.getBoundPropertiesMapInfoForControl(b.getMetadata().getName(),{propertyName:"value"})[0];_[i]={path:this._oMetaData.path,model:this._oMetaData.model,type:this._oTypes.getType(this._oMetaData.property,e),mode:this._oParent.getBindingMode("value")};return{control:new b(this._oParent.getId()+"-input",_),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:_.value.type,property:this._oMetaData.property}}};};$.prototype._createEdmDateTimeOffset=function(){var e=this.getFormatSettings("dateFormatSettings");if(e){e.UTC=false;}var i=$.getBoundPropertiesMapInfoForControl(b.getMetadata().getName(),{propertyName:"value"})[0];var n={width:true,textAlign:true,placeholder:true,name:true,valueState:true};var _=this.createAttributes(null,this._oMetaData.property,n,{event:"change",parameter:"value"});_[i]={model:this._oMetaData.model,path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property,e),mode:this._oParent.getBindingMode("value")};return{control:new b(this._oParent.getId()+"-input",_),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:_.value.type,property:this._oMetaData.property}}};};$.prototype._createEdmNumeric=function(){var e=this._oSelector.checkComboBox();if(e.combobox){return this._createComboBox({valueHelp:{annotation:e.annotation,noDialog:true,noTypeAhead:true},edit:true});}var n={width:true,textAlign:true,placeholder:true,name:true,valueState:true};var i=$.getBoundPropertiesMapInfoForControl(I.getMetadata().getName(),{propertyName:"value"})[0];var _=this.createAttributes(i,this._oMetaData.property,n,{event:"change",parameter:"value"});if(this._oParent.isContextTable()&&sap.ui.getCore().getConfiguration().getRTL()){_.textDirection="LTR";}return{control:new I(this._oParent.getId()+"-input",_),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:_.value.type,property:this._oMetaData.property}}};};$.prototype._createEdmUOM=function(){var e=this.getEdmProperty(),i=this._oMetaData.annotations.uom.property.property,n=this._oMetaData.annotations.uom&&this._oHelper.oAnnotation.isCurrency(e,i);var _={currency:n,edmProperty:i};var a1=this._createEdmUOMAttributes(_),b1=sap.ui.getCore().getConfiguration().getRTL(),c1=b1&&this._oParent.isContextTable(),d1=this._oParent.getId(),e1;if(c1){a1.textDirection="LTR";}var f1=new I(d1+"-input",a1);this.oMeasureField=f1;if(this._oParent.data("suppressUnit")==="true"){var g1={getValue:"getValue"};if(!n){g1.type={type:a1.value.type,property:this._oMetaData.property};}return{control:f1,onCreate:"_onCreate",params:g1};}if(!n){e1={type:a1.value.type,property:this._oMetaData.property};}var h1={change:this.getUOMChangeHandler({smartFieldRootControl:this._oParent,unit:true}),textAlign:this._getEdmUOMTextAlignment()};var i1=$.getBoundPropertiesMapInfoForControl(Z.getMetadata().getName(),{propertyName:"value"})[0];var j1=this._oHelper.getUOMPath(this._oMetaData);h1[i1]={model:this._oMetaData.model,path:j1};this.mapBindings(h1,$._getEmbeddedSmartFieldMapSettings());if(this._oParent.getConfiguration()){h1.configuration=new v({preventInitialDataFetchInValueHelpDialog:this._getPreventInitialDataFetchInVHDialog()});}var k1=new Z(d1+"-sfEdit",h1),l1=this;k1.data("configdata",{"configdata":{currency:n,smartFieldRootControl:this._oParent,measureField:this.oMeasureField,isInnerControl:true,isUOM:!this._oParent.data("configdata"),model:this._oMetaData.model,navigationPath:this._oMetaData.annotations.uom.navigationPath||null,path:j1,entitySetObject:this._oMetaData.annotations.uom.entitySet,entityType:this._oMetaData.annotations.uom.entityType,property:this._oMetaData.annotations.uom.property,annotations:{valuelist:this._oMetaData.annotations.valuelistuom,valuelistType:this._oMetaData.annotations.uom.annotations.valuelistType,text:this._oMetaData.annotations.textuom},modelObject:this._oMetaData.modelObject||this._oModel,onText:function(n1){f1.setLayoutData(new F({growFactor:1}));k1.setLayoutData(l1._getStaticUOMTextFlexItemData({shrinkFactor:0,styleClass:"sapUiCompSmartFieldFlexItemUnitDisplay"}));k1.addStyleClass("sapUiCompSmartFieldUOMDisplayText");if(n1){if(c1&&(typeof n1.setTextDirection==="function")){n1.setTextDirection("LTR");}n1.addStyleClass("sapUiCompSmartFieldUnit");}},onInput:function(n1){f1.setLayoutData(l1._getDynamicAmountInputFlexItemData({control:k1}));k1.setLayoutData(l1._getStaticUOMInputFlexItemData({growFactor:0,styleClass:"sapUiCompSmartFieldFlexItemUnitEdit",minWidth:""}));if(n1){if(c1&&(typeof n1.setTextDirection==="function")){n1.setTextDirection("LTR");}n1.addStyleClass("sapUiCompSmartFieldUnit");}}}});k1.data("errorCheck","setComplexClientErrorSecondOperandNested");f1.addAriaLabelledBy(k1.getId()+"-text");if(k1.getVisible()){f1.addStyleClass("smartFieldPaddingRight");}f1.addStyleClass("sapUiCompSmartFieldValue");var m1=new H({justifyContent:P.End,items:[f1,k1],fitContainer:true,width:this._oParent.getWidth()});m1.addStyleClass("sapUiCompUOM");m1.enhanceAccessibilityState=function(n1,o1){this._oParent.enhanceAccessibilityState(n1,o1);}.bind(this);if(this._oParent.isContextTable()){if(c1){m1.addStyleClass("sapUiCompDirectionLTR");}m1.addStyleClass("sapUiCompUOMInTable");if(this._oParent.getMode()!=="edit"){m1.addStyleClass("sapUiCompUOMInTableDisplay");}}return{control:m1,onCreate:"_onCreateUOM",params:{getValue:true,valuehelp:true,type:e1}};};$.prototype._createEdmUOMAttributes=function(e){e=e||{};var i=this.createUOMDefaultAttributes(e);var n=$.getBoundPropertiesMapInfoForControl(I.getMetadata().getName(),{propertyName:"value"})[0];var _=e.currency||(this._oMetaData.annotations.uom&&this._oHelper.oAnnotation.isCurrency(this.getEdmProperty(),this._oMetaData.annotations.uom.property.property));if(_){i[n]={parts:[{path:this._oMetaData.path},{path:this._oHelper.getUOMPath(this._oMetaData)}],model:this._oMetaData.model,mode:B.OneWay,type:this._oTypes.getCurrencyType(this._oMetaData.property)};}else{i[n]={model:this._oMetaData.model,path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)};}return i;};$.prototype.createUOMDefaultAttributes=function(e){return{textAlign:this._getEdmUOMTextAlignment(),placeholder:this.getAttribute("placeholder"),name:this.getAttribute("name"),change:this.getUOMChangeHandler({smartFieldRootControl:this._oParent,currency:e.currency}),valueState:this.getValueStateBindingInfoForRecommendationStateAnnotation()};};$.prototype._getEdmUOMTextAlignment=function(){var e=this.getAttribute("textAlign");if(!e){e=J.Initial;}if(e===J.Initial){if(this._oParent.isContextTable()){return J.End;}return J.Begin;}return e;};$.prototype._createEdmUOMDisplay=function(){var e=this,i=this._oHelper.getUOMPath(this._oMetaData),n=this._getEdmUOMTextAlignment(),_=null,a1=this.getEdmProperty(),b1=sap.ui.getCore().getConfiguration().getRTL(),c1=b1&&this._oParent.isContextTable();var d1=$.getBoundPropertiesMapInfoForControl(d.getMetadata().getName(),{propertyName:"value"})[0];var e1={textAlign:n};e1[d1]={parts:[{path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)},{path:i}],model:this._oMetaData.model,formatter:this._oTypes.getDisplayFormatter(a1,{currency:this._oHelper.oAnnotation.isCurrency(a1),mask:this._oHelper.oAnnotation.isMasked(a1),type:this._oTypes.getType(this._oMetaData.property)}),useRawValues:true};if(c1){e1.textDirection="LTR";}var f1=new d(this._oParent.getId()+"-text",e1);i=this._oHelper.getUOMPath(this._oMetaData);e1={change:this.getUOMChangeHandler({smartFieldRootControl:this._oParent,unit:true}),textAlign:this._getEdmUOMTextAlignment()};d1=$.getBoundPropertiesMapInfoForControl(Z.getMetadata().getName(),{propertyName:"value"})[0];e1[d1]={model:this._oMetaData.model,path:i};this.mapBindings(e1,$._getEmbeddedSmartFieldMapSettings());f1.addStyleClass("smartFieldPaddingRight");f1.addStyleClass("sapUiCompSmartFieldValue");if(this._checkSuppressUnit()){return{control:f1};}_=new Z(this._oParent.getId()+"-sfDisp",e1);_.data("configdata",{"configdata":{isInnerControl:true,isUOM:!this._oParent.data("configdata"),model:this._oMetaData.model,navigationPath:this._oMetaData.annotations.uom.navigationPath||null,path:i,entitySetObject:this._oMetaData.annotations.uom.entitySet,entityType:this._oMetaData.annotations.uom.entityType,property:this._oMetaData.annotations.uom.property,annotations:{valuelist:this._oMetaData.annotations.valuelistuom,text:this._oMetaData.annotations.textuom},modelObject:this._oMetaData.modelObject||this._oModel,onText:function(h1){if(h1){if(h1.setWrapping){h1.setWrapping(false);}if(c1&&(typeof h1.setTextDirection==="function")){h1.setTextDirection("LTR");}h1.addStyleClass("sapUiCompSmartFieldUnit");}},onInput:function(h1){f1.setLayoutData(new F({growFactor:0}));_.setLayoutData(new F({growFactor:0}));if(h1){if(c1&&(typeof h1.setTextDirection==="function")){h1.setTextDirection("LTR");}h1.addStyleClass("sapUiCompSmartFieldUnit");}},getContextEditable:function(){return e._oParent.getContextEditable();}}});_.data("errorCheck","setComplexClientErrorSecondOperandNested");var g1=new H({alignItems:Y.Center,items:[f1,_],fitContainer:true,width:this._oParent.getWidth()});g1.enhanceAccessibilityState=function(h1,i1){this._oParent.enhanceAccessibilityState(h1,i1);}.bind(this);if(this._oParent.isContextTable()){g1.setJustifyContent("End");this._oParent.addStyleClass("sapUiCompUOMInTable");if(c1){g1.addStyleClass("sapUiCompDirectionLTR");}g1.addStyleClass("sapUiCompUOMInTable");}return{control:g1};};$.prototype._createEdmUOMObjectStatus=function(){var e,i=this.getEdmProperty(),n=this._oTypes.getDisplayFormatter(i,{currency:this._oHelper.oAnnotation.isCurrency(i)}),_=this._oHelper.getUOMPath(this._oMetaData),a1={};var b1=$.getBoundPropertiesMapInfoForControl(r.getMetadata().getName(),{propertyName:"value"})[0];a1[b1]={parts:[{path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)},{path:_}],formatter:function(){var c1=n.apply(this,arguments);return c1+arguments[1];},useRawValues:true};this._addObjectStatusAttributes(a1);e=new r(this._oParent.getId()+"-objStatus",a1);e.addStyleClass("sapUiCompUOM");return{control:e};};$.prototype._createEdmUOMObjectNumber=function(){var e,i,n=this._getEdmUOMTextAlignment();var _=$.getBoundPropertiesMapInfoForControl(p.getMetadata().getName(),{propertyName:"value"});if(this._oMetaData.annotations.uom&&this._oHelper.oAnnotation.isCurrency(this.getEdmProperty(),this._oMetaData.annotations.uom.property.property)){e={model:this._oMetaData.model,textAlign:n};e[_[0]]={parts:[{path:this._oMetaData.path},{path:this._oHelper.getUOMPath(this._oMetaData)}],type:this._oTypes.getCurrencyType(this._oMetaData.property)};e[_[1]]={path:this._oHelper.getUOMPath(this._oMetaData)};}else{e={model:this._oMetaData.model,textAlign:n};e[_[0]]={path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)};e[_[1]]={path:this._oHelper.getUOMPath(this._oMetaData)};}i=new p(this._oParent.getId()+"-objNumber",e);i.addStyleClass("sapUiCompUOM");return{control:i};};$.prototype._createEdmSemantic=function(){var e=this,i=this._oParent.getBindingPath("value"),n=this.getEdmProperty(),_=this._oHelper.oAnnotation.getLabel(n);if(this._oMetaData.annotations.lineitem&&this._oMetaData.annotations.lineitem.labels&&this._oMetaData.annotations.lineitem.labels[i]){_=this._oMetaData.annotations.lineitem.labels[i];}var a1={semanticObject:this._oMetaData.annotations.semantic.defaultSemanticObject,additionalSemanticObjects:this._oMetaData.annotations.semantic.additionalSemanticObjects,semanticObjectLabel:_,fieldName:i,width:this.getAttribute("width"),createControlCallback:function(){var d1=this.createControl(true);if(d1){return d1.control;}return null;}.bind(this)};var b1=this._oHelper.oAnnotation.getText(n);this.oType=this._oTypes.getType(this._oMetaData.property);if(b1){a1.text={parts:[this._oMetaData.path,this._oHelper.getEdmDisplayPath(this._oMetaData)],model:this._oMetaData.model,formatter:function(d1,e1){if(e.oType){d1=e.oType.formatValue(d1,"string");}if(d1&&e1){return e._formatDisplayBehaviour("defaultInputFieldDisplayBehaviour",d1,e1);}return d1?d1:"";}};a1.navigationTargetsObtained=function(d1){var e1=this.getBinding("text");if(!Array.isArray(e1.getValue())){d1.getParameters().show();return;}var f1=e1.getValue();var g1=e._getDisplayBehaviourConfiguration("defaultInputFieldDisplayBehaviour")||"idOnly";var h1=u.getTextsFromDisplayBehaviour(g1,f1[0],f1[1]);var i1=d1.getParameters().mainNavigation;if(i1){i1.setDescription(h1.secondText);}d1.getParameters().show(h1.firstText,i1,undefined,undefined);};}else{var c1=this._oHelper.getUOMPath(this._oMetaData);if(c1){a1.text={parts:[{path:i},{path:c1}],model:this._oMetaData.model,formatter:this._oHelper.oAnnotation.isCurrency(n,this._oMetaData.annotations.uom.property.property)?u.getAmountCurrencyFormatter():u.getMeasureUnitFormatter(),useRawValues:true};a1.uom={path:c1};}else{a1.text={path:i,model:this._oMetaData.model,type:this.oType};}}return{control:new f(this._oParent.getId()+"-sl",a1),onCreate:"_onCreate",params:{getValue:"getInnerControlValue"}};};$.prototype._createMultiLineText=function(e){var i=$.getBoundPropertiesMapInfoForControl(T.getMetadata().getName(),{propertyName:"value"})[0];var n=this.createAttributes(i,this._oMetaData.property,e.attributesNamesMap);var _=this.getFormatSettings("multiLineSettings");n=A(n,_);if(this._oParent.isContextTable()){n.width="100%";}var a1=new T(this._oParent.getId()+"-textArea",n);this._handleEventingForEdmString({control:a1,edmProperty:this._oMetaData.property.property});return{control:a1,onCreate:"_onCreate",params:{type:{type:n.value.type,property:this._oMetaData.property},getValue:"getValue"}};};$.prototype._createLink=function(){var e=this,i=this._oParent,n=i.getBindingInfo("url");var _={text:"",href:""};var a1=$.getBoundPropertiesMapInfoForControl(L.getMetadata().getName(),{propertyName:"url"})[0];if(n){_[a1]=this._oBinding.toBinding(n);}else{_[a1]=i.getUrl();}if(i.hasListeners("press")){_.press=function(h1){h1.preventDefault();i.firePress(h1);};}var b1=i.getBindingInfo("value");var c1=$.getBoundPropertiesMapInfoForControl(L.getMetadata().getName(),{propertyName:"value"});if(b1){var d1=this._oMetaData,e1=d1.path,f1=d1.property.property;if(d1.annotations.text&&(f1.type==="Edm.String")){_[c1[0]]={parts:[d1.path,this._oHelper.getEdmDisplayPath(d1)],formatter:this._formatText.bind(e)};}else if($.isSpecialLink(f1)){var g1=$[$._getLinkFormatterFunctionName(f1)];_[c1[0]]={path:e1};_[c1[1]]={path:e1,formatter:null};if(typeof g1==="function"){_[c1[1]].formatter=g1;}}else{_[c1[0]]=this._oBinding.toBinding(b1);}}else{_[c1[0]]=i.getValue();}return{control:new L(i.getId()+"-link",_),onCreate:"_onCreate",params:{noValidation:true}};};$.prototype._createEdmBoolean=function(){var e=this._oSelector.checkComboBox(),i=this._oParent.getEditable()&&this._oParent.getEnabled()&&this._oParent.getContextEditable(),n=this,_=null,a1;if(e.combobox){if(i||this._oParent.getFetchValueListReadOnly()){return this._createComboBox({valueHelp:{annotation:e.annotation,noDialog:true,noTypeAhead:true},edit:i});}}var b1,c1;if(i){c1=$.getBoundPropertiesMapInfoForControl(C.getMetadata().getName(),{propertyName:"value"})[0];b1=this.createAttributes(c1,this._oMetaData.property,{},{event:"select",parameter:"selected"});a1=new C(this._oParent.getId()+"-cBoxBool",b1);_={getValue:"getSelected"};}else{c1=$.getBoundPropertiesMapInfoForControl(d.getMetadata().getName(),{propertyName:"value"})[0];b1=this.createAttributes(c1,this._oMetaData.property,{width:true,textAlign:true});b1[c1]={model:this._oMetaData.model,path:this._oMetaData.path,formatter:function(d1){return n._formatDisplayBehaviour("defaultCheckBoxDisplayBehaviour",d1);}};a1=new d(this._oParent.getId()+"-text",b1);}return{control:a1,onCreate:"_onCreate",params:_};};$.prototype._createValueHelp=function(){var e=this._oParent.getContent();if(!e){return;}var i={annotation:this._oMetaData.annotations.valuelist,noDialog:!this._oParent.getShowValueHelp(),noTypeAhead:!this._oParent.getShowSuggestion(),aggregation:"suggestionRows"};this._getValueHelpDialogTitle(i);i.analyser=this._oHelper.getAnalyzer(this._oModel||this._oMetaData.modelObject);this.createValueHelp({control:e,edmProperty:this.getEdmProperty(),valueHelp:i,model:this._oModel||this._oMetaData.modelObject,onValueListChange:function(n){this._oParent.fireValueListChanged({changes:n.mParameters.changes});}.bind(this)});};$.prototype.getValueListProviderConfiguration=function(e){var i=g.prototype.getValueListProviderConfiguration.apply(this,arguments);if(this._oHelper.oAnnotation.isUpperCase(this._oMetaData.property.property)){i.displayFormat="UpperCase";}return i;};$.prototype._checkSuppressUnit=function(){if(this._oParent.data("suppressUnit")==="true"){return true;}var i=this._oParent.getBindingInfo("uomVisible");return(!i&&!this._oParent.getUomVisible());};$.prototype.getEdmProperty=function(){var e=this._oHelper;if(e){return e.getEdmProperty(this._oMetaData);}return null;};$.prototype.getEntityType=function(){if(this._oMetaData){return this._oMetaData.entityType;}return null;};$.prototype._checkLink=function(){var i=this._oParent.getBindingInfo("url"),e=this.getEdmProperty();if(i||this._oParent.getUrl()||$.isSpecialLink(e)){return true;}return this._oParent.hasListeners("press");};$._getEmbeddedSmartFieldMapSettings=function(){return{"uomEditable":"editable","uomEnabled":"enabled","uomVisible":"visible","mandatory":"mandatory"};};$.getBoundPropertiesMapInfoForControl=function(e,i){i=i||{};var n=null;switch(e){case"sap.m.Input":case"sap.m.TimePicker":case"sap.m.DatePicker":case"sap.m.DateTimePicker":case"sap.m.TextArea":n={value:["value"]};break;case"sap.m.Text":case"sap.m.ObjectIdentifier":case"sap.ui.comp.navpopover.SmartLink":n={value:["text"]};break;case"sap.m.Link":n={url:["href"],value:["text","href"]};break;case"sap.m.ObjectStatus":n={value:["text","state","icon"]};break;case"sap.m.ObjectNumber":n={value:["number","unit"]};break;case"sap.m.Select":case"sap.m.ComboBox":case"sap.ui.comp.smartfield.DisplayComboBox":n={value:["selectedKey"]};break;case"sap.m.CheckBox":n={value:["selected"]};break;case"sap.ui.comp.smartfield.SmartField":var _=Object.keys(Z.getMetadata().getProperties());n={};_.forEach(function(a1,b1,c1){n[a1]=[c1[b1]];});break;}if(n&&i.propertyName){return n[i.propertyName]||null;}return n;};$.isSpecialLink=function(e){return M.isEmailAddress(e)||M.isPhoneNumber(e)||M.isURL(e);};$._getLinkFormatterFunctionName=function(e){return"_format"+M.getLinkDisplayFormat(e);};$._formatEmailAddress=function(e){return"mailto:"+e;};$._formatPhoneNumber=function(e){return"tel:"+e;};$._formatURL=function(e){return U.validate(e)?e:"";};$.prototype._formatText=function(i,e){if(i&&e){return this._formatDisplayBehaviour("defaultInputFieldDisplayBehaviour",i,e);}return i||"";};$.prototype._getCreator=function(e){return this._oSelector.getCreator(e);};$.prototype._onCreate=function(e,i){var n,_,a1=true,b1=this;if(i){if(i.noValidation){a1=false;}if(i.valuehelp&&this.shouldCreateValueHelpForControl(e)){this._getValueHelpDialogTitle(i.valuehelp);i.valuehelp.analyser=this._oHelper.getAnalyzer(this._oModel||this._oMetaData.modelObject);this.createValueHelp({control:e,edmProperty:this.getEdmProperty(),valueHelp:i.valuehelp,model:this._oModel||this._oMetaData.modelObject,onValueListChange:function(c1){b1._oParent.fireValueListChanged({changes:c1.mParameters.changes});}});}if(i.getValue){n=i.getValue;i.getValue=function(){return e[n]();};}if(i.type){_=this._oFieldControl.getMandatoryCheck(i.type.property);if(_){i.type.type.oFieldControl=_;}}}if(a1){this.addValidations(e,this._oParent.data("errorCheck")||"setSimpleClientError");}if(!this._checkUOM()){e.addStyleClass("sapUiCompSmartFieldValue");}};$.prototype._checkUOM=function(){var e=this._oParent.data("configdata");if(e&&e.configdata){if(e.configdata.onInput||e.configdata.onText){return true;}}return false;};$.prototype.getValueStateBindingInfoForRecommendationStateAnnotation=function(e,i,n){e=e||this.getEdmProperty();var _=e&&e["com.sap.vocabularies.UI.v1.RecommendationState"];if(!_){return null;}z(!(_.Path===undefined),'Missing "Path" attribute of the "com.sap.vocabularies.UI.v1.RecommendationState" annotation for "'+e.name+'" EDM property of "'+this._oMetaData.entityType.name+'" entity type. - '+this.getMetadata().getName());z(!(_.Path===""),'Missing path name of "com.sap.vocabularies.UI.v1.RecommendationState" annotation for "'+e.name+'" EDM property of "'+this._oMetaData.entityType.name+'" entity type. - '+this.getMetadata().getName());i=i||this._oHelper.findProperty(this._oMetaData.entityType.property,_.Path);z(!!i,'The EDM property was not found in the "'+this._oMetaData.entityType.name+'" entity type. - '+this.getMetadata().getName());if(i&&(i.type==="Edm.Byte")){return{model:n||this._oMetaData.model,path:_.Path,formatter:$.formatRecommendationState};}z(i&&(i.type==="Edm.Byte"),'The EDM property "'+i.name+'" of "'+this._oMetaData.entityType.name+'" entity type must be typed as Edm.Byte. - '+this.getMetadata().getName());return null;};$.formatRecommendationState=function(e){e=String(e);switch(e){case"0":return V.None;case"1":return V.Information;case"2":return V.Warning;default:return V.None;}};$.prototype._getDynamicAmountInputFlexItemData=function(e){var i="sapUiCompSmartFieldFlexItemAmountEdit",n="",_=e.control;if(_&&!_.getVisible()){i="sapUiCompSmartFieldFlexItemAmountNoUnitEdit";n="100%";}var a1=this._oAmountInputFlexItemData;if(a1&&!a1.bIsDestroyed){a1.setMaxWidth(n);a1.setStyleClass(i);return a1;}this._oAmountInputFlexItemData=new F({growFactor:1,maxWidth:n,styleClass:i});return this._oAmountInputFlexItemData;};$.prototype._getStaticUOMInputFlexItemData=function(e){var i=this._oUOMInputFlexItemData;if(i&&!i.bIsDestroyed){return i;}this._oUOMInputFlexItemData=new F(e);return this._oUOMInputFlexItemData;};$.prototype._getStaticUOMTextFlexItemData=function(e){var i=this._oUOMTextFlexItemData;if(i&&!i.bIsDestroyed){return i;}this._oUOMTextFlexItemData=new F(e);return this._oUOMTextFlexItemData;};$.prototype._getValueHelpDialogTitle=function(e){e.dialogtitle=this._oParent.getComputedTextLabel();if(!e.dialogtitle){var i=this.getEdmProperty();e.dialogtitle=this._oHelper.oAnnotation.getLabel(i)||i.name;}};$.prototype._onCreateUOM=function(e,i){var n=e.getItems(),_;this.addValidations(n[0],"setComplexClientErrorFirstOperand");if(i&&i.getValue){i.getValue=function(){return n[0].getValue();};}i.uom=function(){return n[1].getValue();};i.uomset=function(a1){n[1].setValue(a1);};if(i.type){_=this._oFieldControl.getMandatoryCheck(i.type.property);if(_){i.type.type.oFieldControl=_;}}};$.prototype.triggerCreationOfControls=function(e){try{if(e){this._init(e);}this._setUOMEditState();var i=this._hasBoundFieldControl();var n=this._bReBindOnVL&&i;if(!n){this._oFieldControl.bindProperties({metadata:this._oMetaData});}this._oParent._toggleInnerControlIfRequired();this._addLabelAndQuickInfo();if(!n){this._oParent.fireInitialise();}}catch(_){y.error(_,null,this.getMetadata().getName());}};$.prototype._checkTextInDisplayModeValueList=function(){var e=this._oHelper.getValueListAnnotationPath(this._oMetaData),i=this.getEdmProperty();return!!(this._oMetaData.annotations&&this._oMetaData.annotations.valuelist!==undefined&&(this._oMetaData.property.property.type==="Edm.String"||this._oMetaData.property.property.type==="Edm.Guid")&&(this._oHelper.oAnnotation.getTextArrangement(i)||this._oParent.data("defaultInputFieldDisplayBehaviour"))&&this._oParent.getMode()==="display"&&this._oParent.getFetchValueListReadOnly()&&e&&!this._oParent.getExpandNavigationProperties()&&!this._oHelper.startWithNavigationProperty(e,this._oMetaData)&&!this._oHelper.oAnnotation.getText(i));};$.prototype.reBindIfNecessary=function(){if(this._bInitialized&&this.bPending===false&&this._checkTextInDisplayModeValueList()){if(!this._oModel){return;}this._oModel.getMetaModel().loaded().then(function(){var e;if(!this._oParent){return false;}this._init(this._oMeta);e=this._oMetaData.annotations.valuelist;if(typeof e==="string"){return this._oHelper.loadValueListAnnotation(e);}return false;}.bind(this)).then(function(e){if(e&&this._oParent&&this._oParent.getMode()==="display"){this.reBind();}}.bind(this)).catch(function(){});}};$.prototype.reBind=function(){this._bReBindOnVL=true;this.bind().finally(function(){this._bReBindOnVL=false;}.bind(this));};$.prototype._hasBoundFieldControl=function(){var e=this._oFieldControl.getPropertyNames();for(var i=0;i<e.length;i++){if(this._oParent.getBinding(e[i])){return true;}}return false;};$.prototype.bind=function(){if(!(!this._bInitialized&&!this.bPending)&&!this._bReBindOnVL){return Promise.resolve();}this._bInitialized=true;var e=this._oParent.data("configdata");if(e&&e.configdata){this.triggerCreationOfControls(this._oMeta);return Promise.resolve();}if(!this._oModel){return Promise.resolve();}var i=!!(this._oParent&&this._oParent.isTextInEditModeSourceNotNone());if(!i&&this._oModel.bMetaModelLoaded&&(this._oParent.getMode()!=="display"||!this._oParent.getFetchValueListReadOnly())){this.triggerCreationOfControls(this._oMeta);return Promise.resolve();}this.bPending=true;var n=this._oModel.getMetaModel().loaded().catch(function(a1){y.error("The meta model could not be loaded.",a1,this.getMetadata().getName());}.bind(this));var _=n.then(function b1(){if(!this._oParent){this.bPending=false;return Promise.reject();}this._init(this._oMeta);this._bTextInDisplayModeValueList=this._checkTextInDisplayModeValueList();if((this._oParent.getMode()!=="display"&&i)||this._bTextInDisplayModeValueList){var a1=this._oMetaData.annotations.valuelist;if(typeof a1==="string"){return this._oHelper.loadValueListAnnotation(a1);}else{this.bPending=false;this.triggerCreationOfControls();return Promise.reject();}}this.bPending=false;this.triggerCreationOfControls();}.bind(this)).then(function b1(a1){if(!i&&!this._bTextInDisplayModeValueList){return;}if(!this._oParent){return;}this.bPending=false;if(a1){this._initValueList(a1);}this.triggerCreationOfControls();if(a1&&this.oTextArrangementDelegate){this.oTextArrangementDelegate.fetchIDAndDescriptionCollectionIfRequired();this._handleModelContextChangeEvent=function(){if(this._oParent&&this._oParent.getModel()&&this._oParent.getBindingContext()){this.oTextArrangementDelegate.fetchIDAndDescriptionCollectionIfRequired();}}.bind(this);this._oParent.attachModelContextChange(this._handleModelContextChangeEvent);}}.bind(this)).catch(function(a1){if(a1){y.error(a1,null,this.getMetadata().getName()+".onMetaModelLoaded");}}.bind(this));return _;};$.prototype._handleModelContextChangeEvent=function(){};$.prototype._addLabelAndQuickInfo=function(){var e=this.getDataProperty();e=e.property;var i=this._oHelper.oAnnotation.getLabel(e);var n=this._oHelper.oAnnotation.getQuickInfo(e);if(i){this._oParent._sAnnotationLabel=i;}if(n&&this._oParent.isPropertyInitial("tooltipLabel")){this._oParent.setTooltipLabel(n);}};$.prototype.rebindOnCreated=function(){var e,i=this._oFieldControl.getControlFormatters(this._oMetaData,["editable"]);for(var n in i){e=this._oBinding.fromFormatter(this._oMetaData.model,i[n]);this._oParent.bindProperty(n,e);}};$.prototype._setUOMEditState=function(){if(this._oFieldControl.hasUomEditState(this._oMetaData)){var e=this._oFieldControl.getUOMEditState(this._oMetaData);if(e){var i=this._oBinding.fromFormatter(this._oMetaData.model,e);this._oParent.bindProperty("uomEditState",i);}}};$.prototype.getDataProperty=function(){return this._oMetaData.property;};$.prototype.getDropdownItemKeyType=function(e){var i=e.getMetadata().getName();if((i==="sap.ui.comp.smartfield.DisplayComboBox")||(i==="sap.m.ComboBox")||(i==="sap.m.Select")){var n=$.getBoundPropertiesMapInfoForControl(i,{propertyName:"value"})[0];var _=e.getBindingInfo(n);return(_&&_.type)||null;}return null;};$.prototype.getMetaData=function(){return this._oMetaData;};$.prototype.getODataHelper=function(){return this._oHelper;};$.prototype.destroy=function(){if(this._oFieldControl){this._oFieldControl.destroy();}if(this._oSelector){this._oSelector.destroy();}if(this._oTypes){this._oTypes.destroy();}if(this._oHelper){this._oHelper.destroy();}if(this.oType){this.oType.destroy();this.oType=null;}if(this.oTextArrangementDelegate){this.oTextArrangementDelegate.destroy();}this._oHelper=null;this._oFieldControl=null;this._oTypes=null;this._oSelector=null;this._oMetaData=null;this._oAmountInputFlexItemData=null;this._oUOMInputFlexItemData=null;this._oUOMTextFlexItemData=null;this.oMeasureField=null;this.oTextArrangementDelegate=null;g.prototype.destroy.apply(this,arguments);};return $;},true);
