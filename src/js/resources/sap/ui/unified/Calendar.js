/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/core/Control','sap/ui/core/LocaleData','sap/ui/unified/calendar/CalendarUtils','sap/ui/unified/DateRange','sap/ui/unified/DateTypeRange','./calendar/Header','./calendar/Month','./calendar/MonthPicker','./calendar/YearPicker','./calendar/YearRangePicker','./calendar/CalendarDate',"sap/ui/core/date/UniversalDate",'./library','sap/ui/Device','sap/ui/core/format/DateFormat','sap/ui/core/ResizeHandler','sap/ui/core/Locale','sap/ui/events/KeyCodes',"./CalendarRenderer","sap/ui/dom/containsOrEquals","sap/base/util/deepEqual","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/Configuration","sap/ui/core/date/CalendarWeekNumbering"],function(C,L,a,D,b,H,M,c,Y,d,e,U,l,f,g,R,h,K,j,k,m,n,q,o,p){"use strict";var r=sap.ui.getCore(),s=sap.ui.core.CalendarType;var t=C.extend("sap.ui.unified.Calendar",{metadata:{library:"sap.ui.unified",designtime:"sap/ui/unified/designtime/Calendar.designtime",properties:{intervalSelection:{type:"boolean",group:"Behavior",defaultValue:false},singleSelection:{type:"boolean",group:"Behavior",defaultValue:true},months:{type:"int",group:"Appearance",defaultValue:1},firstDayOfWeek:{type:"int",group:"Appearance",defaultValue:-1},nonWorkingDays:{type:"int[]",group:"Appearance",defaultValue:null},primaryCalendarType:{type:"sap.ui.core.CalendarType",group:"Appearance",defaultValue:null},secondaryCalendarType:{type:"sap.ui.core.CalendarType",group:"Appearance",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},minDate:{type:"object",group:"Misc",defaultValue:null},maxDate:{type:"object",group:"Misc",defaultValue:null},showWeekNumbers:{type:"boolean",group:"Appearance",defaultValue:true},calendarWeekNumbering:{type:"sap.ui.core.date.CalendarWeekNumbering",group:"Appearance",defaultValue:null}},aggregations:{selectedDates:{type:"sap.ui.unified.DateRange",multiple:true,singularName:"selectedDate"},specialDates:{type:"sap.ui.unified.DateTypeRange",multiple:true,singularName:"specialDate"},disabledDates:{type:"sap.ui.unified.DateRange",multiple:true,singularName:"disabledDate"},header:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},secondMonthHeader:{type:"sap.ui.unified.calendar.Header",multiple:false,visibility:"hidden"},month:{type:"sap.ui.unified.calendar.Month",multiple:true,visibility:"hidden"},monthPicker:{type:"sap.ui.unified.calendar.MonthPicker",multiple:false,visibility:"hidden"},yearPicker:{type:"sap.ui.unified.calendar.YearPicker",multiple:false,visibility:"hidden"},yearRangePicker:{type:"sap.ui.unified.calendar.YearPicker",multiple:false,visibility:"hidden"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"},legend:{type:"sap.ui.unified.CalendarLegend",multiple:false}},events:{select:{},cancel:{},startDateChange:{},weekNumberSelect:{allowPreventDefault:true,parameters:{weekNumber:{type:"int"},weekDays:{type:"sap.ui.unified.DateRange"}}}}}});t.prototype.init=function(){this._iBreakPointTablet=f.media._predefinedRangeSets[f.media.RANGESETS.SAP_STANDARD_EXTENDED].points[0];this._iBreakPointDesktop=f.media._predefinedRangeSets[f.media.RANGESETS.SAP_STANDARD_EXTENDED].points[1];this._iBreakPointLargeDesktop=f.media._predefinedRangeSets[f.media.RANGESETS.SAP_STANDARD_EXTENDED].points[2];var i=sap.ui.getCore().getConfiguration().getCalendarType();this.setProperty("primaryCalendarType",i);this.setProperty("secondaryCalendarType",i);this._iMode=0;this._iColumns=1;this._oYearFormat=g.getDateInstance({format:"y",calendarType:i});this.data("sap-ui-fastnavgroup","true",true);this._oMinDate=a._minDate(this.getPrimaryCalendarType());this._oMaxDate=a._maxDate(this.getPrimaryCalendarType());this._initializeHeader();this._initializeSecondMonthHeader();var I=this._createMonth(this.getId()+"--Month0");I.attachEvent("focus",this._handleFocus,this);I.attachEvent("select",A,this);I.attachEvent("_renderMonth",z,this);I.attachEvent("_bindMousemove",B,this);I.attachEvent("_unbindMousemove",E,this);I._bNoThemeChange=true;this.addAggregation("month",I);this._initilizeMonthPicker();this._initilizeYearPicker();this._initilizeYearRangePicker();this._resizeProxy=u.bind(this);this._oSelectedMonth;this._bSkipCancelButtonRendering=false;this._bActionTriggeredFromSecondHeader=false;};t.prototype.exit=function(){if(this._sInvalidateMonth){clearTimeout(this._sInvalidateMonth);}if(this._afterHeaderRenderAdjustCSS){this.removeDelegate(this._afterHeaderRenderAdjustCSS);this._afterHeaderRenderAdjustCSS=null;}if(this._afterSecondHeaderRenderAdjustCSS){this.removeDelegate(this._afterSecondHeaderRenderAdjustCSS);this._afterSecondHeaderRenderAdjustCSS=null;}if(this._sResizeListener){R.deregister(this._sResizeListener);this._sResizeListener=undefined;}this._oSelectedMonth=null;};t.prototype._initializeHeader=function(){var i=new H(this.getId()+"--Head");i.attachEvent("pressPrevious",this._handlePrevious,this);i.attachEvent("pressNext",this._handleNext,this);i.attachEvent("pressButton1",this._handleButton1,this);i.attachEvent("pressButton2",this._handleButton2,this);i.attachEvent("pressButton3",this._handleButton1,this);i.attachEvent("pressButton4",this._handleButton2,this);this._afterHeaderRenderAdjustCSS=this._createOnAfterRenderingDelegate(i);i.addDelegate(this._afterHeaderRenderAdjustCSS);this.setAggregation("header",i);};t.prototype._createOnAfterRenderingDelegate=function(i){return{onAfterRendering:function(){if(i.getVisible()&&!i.getVisibleButton1()){i.$().find(".sapUiCalHeadB2").addClass("sapUiCalSingleYearButton");}if(i.getVisible()&&!i._getVisibleButton3()){this._isTwoMonthsInTwoColumns()&&i.$().find(".sapUiCalHeadB4").addClass("sapUiCalSingleYearButton");}}.bind(this)};};t.prototype._initializeSecondMonthHeader=function(){var S=new H(this.getId()+"--SecondMonthHead",{visible:false});S.addStyleClass("sapUiCalHeadSecondMonth");S.attachEvent("pressPrevious",this._handlePrevious,this);S.attachEvent("pressNext",this._handleNext,this);S.attachEvent("pressButton1",this._handleButton1,this);S.attachEvent("pressButton2",this._handleButton2,this);this._afterSecondHeaderRenderAdjustCSS=this._createOnAfterRenderingDelegate(S);S.addDelegate(this._afterSecondHeaderRenderAdjustCSS);this.setAggregation("secondMonthHeader",S);};t.prototype._initilizeMonthPicker=function(){var i=new c(this.getId()+"--MP");i._bCalendar=true;i.attachEvent("select",this._selectMonth,this);i.attachEvent("pageChange",F,this);i._bNoThemeChange=true;this.setAggregation("monthPicker",i);i._setSelectedDatesControlOrigin(this);};t.prototype._initilizeYearPicker=function(){var i=new Y(this.getId()+"--YP");i._bCalendar=true;i.attachEvent("select",this._selectYear,this);i.attachEvent("pageChange",G,this);this.setAggregation("yearPicker",i);i._setSelectedDatesControlOrigin(this);};t.prototype._initilizeYearRangePicker=function(){var i=new d(this.getId()+"--YRP");i.attachEvent("select",this._selectYearRange,this);i.setPrimaryCalendarType(this.getPrimaryCalendarType());this.setAggregation("yearRangePicker",i);};t.prototype._createMonth=function(i){var I=new M(i,{width:"100%",calendarWeekNumbering:this.getCalendarWeekNumbering()});I._bCalendar=true;I.attachEvent("datehovered",this._handleDateHovered,this);I.attachEvent("weekNumberSelect",this._handleWeekNumberSelect,this);return I;};t.prototype._handleWeekNumberSelect=function(i){var I=this.fireWeekNumberSelect({weekNumber:i.getParameter("weekNumber"),weekDays:i.getParameter("weekDays")});if(!I){i.preventDefault();}return this;};t.prototype._handleDateHovered=function(I){var J=this.getAggregation("month"),N=I.getParameter("date1"),O=I.getParameter("date2"),i;for(i=0;i<J.length;i++){J[i]._markDatesBetweenStartAndHoveredDate(N,O);}};t.prototype.onBeforeRendering=function(){var I=this.getAggregation("month"),J,N=I[0].getDate(),O=this._getFocusedDate(),P=this.getAggregation("header");if(this.getFirstDayOfWeek()!==-1&&this.getCalendarWeekNumbering()!=="Default"){n.warning("Both properties firstDayOfWeek and calendarWeekNumbering should not be used at the same time!");}if(I.length>1&&N){J=e.fromLocalJSDate(N,this.getPrimaryCalendarType());}else if(I.length>1){J=v.call(this,this._getFocusedDate());}else{J=O;}for(var i=0;i<I.length;i++){N=new e(J);if(i>0){N.setMonth(N.getMonth()+i,1);}var Q=N;if(O.getYear()===N.getYear()&&O.getMonth()===N.getMonth()){Q=O;}I[i].displayDate(Q.toLocalJSDate());I[i].setShowWeekNumbers(this.getShowWeekNumbers());}if(this._getMonthPicker()){this._setDisabledMonths(O.getYear(),this._getMonthPicker());}this._updateHeader(J);this._iSize=0;if(!this._getSucessorsPickerPopup()){P.setVisibleButton1(true);P.setVisibleButton2(true);}};t.prototype.onAfterRendering=function(i){if(!this._getSucessorsPickerPopup()){w.call(this);}if(y.call(this)>1||this._bInitMonth){i.size={width:this.getDomRef().offsetWidth};u.call(this,i,true);if(!this._sResizeListener){this._sResizeListener=R.register(this,this._resizeProxy);}this._bInitMonth=undefined;}};t.prototype.invalidate=function(O){if(!this._bDateRangeChanged&&(!O||!(O instanceof D))){C.prototype.invalidate.apply(this,arguments);}else if(this.getDomRef()&&this._iMode==0&&!this._sInvalidateMonth){this._sInvalidateMonth=setTimeout(this._invalidateMonth.bind(this,O),0);}};t.prototype.removeSelectedDate=function(S){this._bDateRangeChanged=true;return this.removeAggregation("selectedDates",S);};t.prototype.removeAllSelectedDates=function(){this._bDateRangeChanged=true;var i=this.removeAllAggregation("selectedDates");return i;};t.prototype.destroySelectedDates=function(){this._bDateRangeChanged=true;var i=this.destroyAggregation("selectedDates");return i;};t.prototype.removeAllSpecialDates=function(){this._bDateRangeChanged=true;var i=this.removeAllAggregation("specialDates");return i;};t.prototype.destroySpecialDates=function(){this._bDateRangeChanged=true;var i=this.destroyAggregation("specialDates");return i;};t.prototype._setSpecialDatesControlOrigin=function(i){this._oSpecialDatesControlOrigin=i;};t.prototype.getSpecialDates=function(){var P=this.getParent();if(this._oSpecialDatesControlOrigin){return this._oSpecialDatesControlOrigin.getSpecialDates();}if(P&&P.getSpecialDates){return P.getSpecialDates();}else{return this.getAggregation("specialDates",[]);}};t.prototype.removeAllDisabledDates=function(){this._bDateRangeChanged=true;var i=this.removeAllAggregation("disabledDates");return i;};t.prototype.destroyDisabledDates=function(){this._bDateRangeChanged=true;var i=this.destroyAggregation("disabledDates");return i;};t.prototype.setLocale=function(i){if(this._sLocale!=i){this._sLocale=i;this._oLocaleData=undefined;this.invalidate();this._toggleTwoMonthsInTwoColumnsCSS();}return this;};t.prototype.getLocale=function(){if(!this._sLocale){this._sLocale=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale().toString();}return this._sLocale;};t.prototype._getFocusedDate=function(){if(!this._oFocusedDate){_.call(this);}return this._oFocusedDate;};t.prototype._setFocusedDate=function(i){a._checkCalendarDate(i);this._oFocusedDate=new e(i,this.getPrimaryCalendarType());};t.prototype.focusDate=function(i){x.call(this,i,false);return this;};t.prototype.displayDate=function(i){x.call(this,i,true);return this;};t.prototype.getStartDate=function(){var S;if(this.getDomRef()){var i=this.getAggregation("month");S=e.fromLocalJSDate(i[0].getDate(),this.getPrimaryCalendarType());}else{S=new e(this._getFocusedDate());}S.setDate(1);return S.toLocalJSDate();};t.prototype.setPopupMode=function(P){this._bPoupupMode=P;return this;};t.prototype.setCalendarWeekNumbering=function(I){var J=this.getAggregation("month");this.setProperty("calendarWeekNumbering",I);for(var i=0;i<J.length;i++){J[i].setProperty("calendarWeekNumbering",I);}return this;};t.prototype.setMonths=function(I){this._bDateRangeChanged=undefined;this.setProperty("months",I,false);I=y.call(this);var J=this.getAggregation("month");var i=0;var N;if(J.length<I){for(i=J.length;i<I;i++){N=this._createMonth(this.getId()+"--Month"+i);N.attachEvent("focus",this._handleFocus,this);N.attachEvent("select",A,this);N.attachEvent("_renderMonth",z,this);N.attachEvent("_bindMousemove",B,this);N.attachEvent("_unbindMousemove",E,this);N._bNoThemeChange=true;N._bNotInTabChain=true;N.setCalendarWeekNumbering(this.getCalendarWeekNumbering());N.setSecondaryCalendarType(this._getSecondaryCalendarType());this.addAggregation("month",N);}}else if(J.length>I){for(i=J.length;i>I;i--){N=this.removeAggregation("month",i-1);N.destroy();}if(I==1){this._bInitMonth=true;}}if(I>1&&J[0].getDate()){J[0].setProperty("date",null,true);}return this;};t.prototype.setPrimaryCalendarType=function(I){var J=this.getAggregation("month"),N,O,P,Q,i;this.setProperty("primaryCalendarType",I);this._adjustYearRangeDisplay();this._oYearFormat=g.getDateInstance({format:"y",calendarType:I});if(this._oFocusedDate){this._oFocusedDate=new e(this._oFocusedDate,I);}this._oMinDate=new e(this._oMinDate,I);this._oMaxDate=new e(this._oMaxDate,I);for(i=0;i<J.length;i++){N=J[i];N.setPrimaryCalendarType(I);}if(!this._getSucessorsPickerPopup()){O=this._getMonthPicker();O.setPrimaryCalendarType(I);P=this._getYearPicker();P.setPrimaryCalendarType(I);Q=this.getAggregation("yearRangePicker");Q.setPrimaryCalendarType(I);}return this;};t.prototype.setSecondaryCalendarType=function(I){this._bSecondaryCalendarTypeSet=true;this.setProperty("secondaryCalendarType",I);this._oYearFormatSecondary=g.getDateInstance({format:"y",calendarType:I});var J=this.getAggregation("month");for(var i=0;i<J.length;i++){var N=J[i];N.setSecondaryCalendarType(I);}return this;};t.prototype._getSecondaryCalendarType=function(){var S;if(this._bSecondaryCalendarTypeSet){S=this.getSecondaryCalendarType();var P=this.getPrimaryCalendarType();if(S==P){S=undefined;}}return S;};t.prototype._getActiveHeaderAggregation=function(){if(this._bActionTriggeredFromSecondHeader&&this._isTwoMonthsInOneColumn()){return this.getAggregation("secondMonthHeader");}else{return this.getAggregation("header");}};t.prototype._setIsSecondHeaderButtonAction=function(i){if(i.getSource().sParentAggregationName==="secondMonthHeader"||i.sId==="pressButton3"||i.sId==="pressButton4"){this._bActionTriggeredFromSecondHeader=true;}else{this._bActionTriggeredFromSecondHeader=false;}};t.prototype.setMinDate=function(I){var J=this.getAggregation("month"),P=this.getPrimaryCalendarType(),N;if(m(I,this.getMinDate())){return this;}if(!I){this._oMinDate=a._minDate(P);}else{a._checkJSDateObject(I);this._oMinDate=e.fromLocalJSDate(I,P);var O=this._oMinDate.getYear();a._checkYearInValidRange(O);if(this._oMaxDate.isBefore(this._oMinDate)){n.warning("minDate > maxDate -> maxDate set to end of the month",this);this._oMaxDate=e.fromLocalJSDate(I,P);this._oMaxDate.setDate(a._daysInMonth(this._oMaxDate));this.setProperty("maxDate",this._oMaxDate.toLocalJSDate(),true);}this._setMinMaxDateExtend(e.fromLocalJSDate(I,P));}this.setProperty("minDate",I,false);if(!this._getSucessorsPickerPopup()){N=this._oMinDate.getYear();this._getYearPicker()._oMinDate.setYear(N);this._getYearRangePicker()._oMinDate.setYear(N);for(var i=0;i<J.length;i++){J[i]._oMinDate=new e(this._oMinDate);}}return this;};t.prototype.setMaxDate=function(I){var J=this.getAggregation("month"),P,N;if(m(I,this.getMaxDate())){return this;}if(!I){this._oMaxDate=a._maxDate(P);}else{a._checkJSDateObject(I);this._oMaxDate=e.fromLocalJSDate(I,P);var O=this._oMaxDate.getYear();a._checkYearInValidRange(O);if(this._oMinDate.isAfter(this._oMaxDate)){n.warning("maxDate < minDate -> minDate set to begin of the month",this);this._oMinDate=e.fromLocalJSDate(I,P);this._oMinDate.setDate(1);this.setProperty("minDate",this._oMinDate.toLocalJSDate(),true);}this._setMinMaxDateExtend(e.fromLocalJSDate(I,P));}this.setProperty("maxDate",I,false);if(!this._getSucessorsPickerPopup()){N=this._oMaxDate.getYear();this._getYearPicker()._oMaxDate.setYear(N);this._getYearRangePicker()._oMaxDate.setYear(N);}for(var i=0;i<J.length;i++){J[i]._oMaxDate=new e(this._oMaxDate);}return this;};t.prototype._setMinMaxDateExtend=function(i){if(this._oFocusedDate){if(a._isOutside(this._oFocusedDate,this._oMinDate,this._oMaxDate)){n.warning("focused date is not between [minDate - maxDate] -> refocus to the new max/min date: "+i.toString(),this);this.focusDate(i.toLocalJSDate());}}};t.prototype._getLocaleData=function(){if(!this._oLocaleData){var i=this.getLocale();var I=new h(i);this._oLocaleData=L.getInstance(I);}return this._oLocaleData;};t.prototype._getShowMonthHeader=function(){var i=y.call(this);if(i>2){return true;}else{return false;}};t.prototype._getMonthPicker=function(){return this.getAggregation("monthPicker");};t.prototype._getYearPicker=function(){return this.getAggregation("yearPicker");};t.prototype._getYearRangePicker=function(){return this.getAggregation("yearRangePicker");};t.prototype.onclick=function(i){var I=i.target;if(i.isMarked("delayedMouseEvent")){return;}if(I.id==this.getId()+"-cancel"){this.onsapescape(i);}};t.prototype.onmousedown=function(i){if(i.cancelable){i.preventDefault();}i.setMark("cancelAutoClose");};t.prototype.onsapescape=function(i){this.fireCancel();this._closedPickers();if(!this._getSucessorsPickerPopup()){this._updateHeadersButtons();this._setHeaderText(this._getFocusedDate());}};t.prototype.onsapshow=function(i){var I=i.which||i.keyCode;if(this._bPoupupMode&&I!==K.F4){this._closedPickers();this.fireCancel();i.preventDefault();}};t.prototype.onkeydown=function(i){var I=i.which||i.keyCode,S=i.shiftKey;if(I!==K.F4){return;}i.preventDefault();switch(this._iMode){case 0:if(S){this._showYearPicker();}else{this._showMonthPicker();}break;case 1:if(S){this._showYearPicker();}break;case 2:if(S){this._showYearRangePicker();}break;default:}};t.prototype.onsaphide=t.prototype.onsapshow;t.prototype.onsaptabnext=function(i){var I=this.getAggregation("header");if(k(this.getDomRef("content"),i.target)){if(I.getVisibleButton1()){I.getDomRef("B1").focus();i.preventDefault();}else if(I.getVisibleButton2()){I.getDomRef("B2").focus();i.preventDefault();}else if(!this._bPoupupMode){this._clearTabindex0();}else{this._clearTabindex0();i.preventDefault();}}else if(i.target.id===I.getId()+"-B1"){I.getVisibleButton2()&&I.getDomRef("B2").focus();i.preventDefault();}else if(i.target.id===I.getId()+"-B2"){if(this._bPoupupMode){this._moveFocusToCalContent();i.preventDefault();}else{this._clearTabindex0();}}};t.prototype.onsaptabprevious=function(i){var I=this.getAggregation("header");if(k(this.getDomRef("content"),i.target)){if(this._bPoupupMode){if(I.getVisibleButton2()){I.getDomRef("B2").focus();}else{I.getVisibleButton1()&&I.getDomRef("B1").focus();}i.preventDefault();}else{this._clearTabindex0();}}else if(i.target.id===I.getId()+"-B1"){this._moveFocusToCalContent();i.preventDefault();}else if(i.target.id===I.getId()+"-B2"){if(I.getVisibleButton1()){I.getDomRef("B1").focus();}else{this._moveFocusToCalContent();}i.preventDefault();}};t.prototype._clearTabindex0=function(){var I=this.getAggregation("month"),J=this._getMonthPicker(),N=this.getAggregation("yearPicker"),O=this.getAggregation("yearRangePicker"),P,i;for(i=0;i<I.length;i++){P=I[i];q(P._oItemNavigation.getItemDomRefs()[P._oItemNavigation.getFocusedIndex()]).attr("tabindex","-1");}if(!this._getSucessorsPickerPopup()){if(J.getDomRef()){q(J._oItemNavigation.getItemDomRefs()[J._oItemNavigation.getFocusedIndex()]).attr("tabindex","-1");}if(N.getDomRef()){q(N._oItemNavigation.getItemDomRefs()[N._oItemNavigation.getFocusedIndex()]).attr("tabindex","-1");}if(O.getDomRef()){q(O._oItemNavigation.getItemDomRefs()[O._oItemNavigation.getFocusedIndex()]).attr("tabindex","-1");}}};t.prototype._moveFocusToCalContent=function(){var I=this.getAggregation("yearPicker"),J=this._getMonthPicker(),N=this.getAggregation("month"),O,P,Q,i;switch(this._iMode){case 0:Q=this._getFocusedDate();for(i=0;i<N.length;i++){O=N[i];P=e.fromLocalJSDate(O.getDate(),this.getPrimaryCalendarType());if(Q.isSame(P)){O._oItemNavigation.focusItem(O._oItemNavigation.getFocusedIndex());}else{q(O._oItemNavigation.getItemDomRefs()[O._oItemNavigation.getFocusedIndex()]).attr("tabindex","0");}}break;case 1:if(!this._getSucessorsPickerPopup()){J._oItemNavigation.focusItem(J._oItemNavigation.getFocusedIndex());}break;case 2:if(!this._getSucessorsPickerPopup()){I._oItemNavigation.focusItem(I._oItemNavigation.getFocusedIndex());}break;}};t.prototype.onfocusin=function(i){if(i.target.id==this.getId()+"-end"){this._focusOnShiftTab();if(!this._bPoupupMode){this._clearTabindex0();}}this.$("end").attr("tabindex","-1");};t.prototype._focusOnShiftTab=function(){var i=this.getAggregation("header"),I=i.getDomRef("B2");if(I){I.focus();}else{this.focus();}};t.prototype.onsapfocusleave=function(I){var J,N,O,P;if(!I.relatedControlId||!k(this.getDomRef(),sap.ui.getCore().byId(I.relatedControlId).getFocusDomRef())){this.$("end").attr("tabindex","0");if(!this._bPoupupMode){J=this.getAggregation("month");switch(this._iMode){case 0:for(var i=0;i<J.length;i++){N=J[i];q(N._oItemNavigation.getItemDomRefs()[N._oItemNavigation.getFocusedIndex()]).attr("tabindex","0");}break;case 1:if(!this._getSucessorsPickerPopup()){O=this._getMonthPicker();q(O._oItemNavigation.getItemDomRefs()[O._oItemNavigation.getFocusedIndex()]).attr("tabindex","0");}break;case 2:if(!this._getSucessorsPickerPopup()){P=this._getYearPicker();q(P._oItemNavigation.getItemDomRefs()[P._oItemNavigation.getFocusedIndex()]).attr("tabindex","0");}break;}}}};t.prototype.getFocusDomRef=function(){var i=this._oSelectedMonth?this._oSelectedMonth:this.getAggregation("month")[0],I=this._getMonthPicker(),J=this._getYearPicker(),N=this._getYearRangePicker();switch(this._iMode){case 0:return i.getFocusDomRef();case 1:return I.getFocusDomRef();case 2:return J.getFocusDomRef();case 3:return N.getFocusDomRef();default:return;}};t.prototype.onThemeChanged=function(){var I;if(!this.getDomRef()){return;}this._bNamesLengthChecked=undefined;if(!this._getSucessorsPickerPopup()){I=this._getMonthPicker();this._showMonthPicker(true);I._bNoThemeChange=false;I.onThemeChanged(arguments);I._bNoThemeChange=true;this._bLongMonth=I._bLongMonth;this._hideMonthPicker(true);}var J=this.getAggregation("month");for(var i=0;i<J.length;i++){var N=J[i];N._bNoThemeChange=false;N.onThemeChanged(arguments);N._bNoThemeChange=true;}var O;if(J.length>1){O=e.fromLocalJSDate(J[0].getDate(),this.getPrimaryCalendarType());}else{O=this._getFocusedDate();}this._setHeaderText(O);this._updateHeadersButtons();this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInTwoColumnsCSS();if(!this._getSucessorsPickerPopup()){w.call(this);}};t.prototype._updateHeader=function(i){this._setHeaderText(i);switch(this._iMode){case 0:this._togglePrevNext(i,true);break;case 1:this._togglePrevNext(i,false);break;case 2:case 3:this._getYearPicker().getDomRef()&&this._togglePrevNexYearPicker();break;}};t.prototype._togglePrevNext=function(i,I){var J=this._oMaxDate.getYear();var N=this._oMinDate.getYear();var O=this._oMaxDate.getMonth();var P=this._oMinDate.getMonth();var Q=this.getAggregation("header");var S=y.call(this);var T=new e(i,this.getPrimaryCalendarType());if(this._iMode==0&&S>1){T=v.call(this,i);T.setMonth(T.getMonth()+S-1);T.setDate(a._daysInMonth(T));}else{T.setDate(a._daysInMonth(T));}var V=T.getYear();var W=T.getMonth();if(V>J||(V==J&&(!I||W>=O))||(this._iMode==1&&this._getSucessorsPickerPopup())){Q.setEnabledNext(false);}else{Q.setEnabledNext(true);}if(this._iMode==0&&S>1){T.setMonth(T.getMonth()-S+1,1);}else{T.setDate(1);}V=T.getYear();W=T.getMonth();if(V<N||(V==N&&(!I||W<=P))||(this._iMode==1&&this._getSucessorsPickerPopup())){Q.setEnabledPrevious(false);}else{Q.setEnabledPrevious(true);}};t.prototype._togglePrevNexYearPicker=function(){var i=this.getAggregation("yearRangePicker"),I=this._getYearPicker(),P=this.getPrimaryCalendarType(),J=new e(this._oMinDate,P),N=new e(this._oMaxDate,P),O=this.getAggregation("header"),Q=1,S,T;if(i.getDomRef()&&i.getDomRef().style.display===""){T=i.getYears();S=e.fromLocalJSDate(i.getFirstRenderedDate());Q=i.getRangeSize();}else{T=I.getYears();S=e.fromLocalJSDate(I.getFirstRenderedDate());}S.setYear(S.getYear()+Math.floor(T/2)*Q);N.setYear(N.getYear()-Math.ceil(T/2)*Q);N.setMonth(11,31);J.setYear(J.getYear()+Math.floor(T/2)*Q+1);J.setMonth(0,1);O.setEnabledNext(S.isSameOrBefore(N));O.setEnabledPrevious(S.isSameOrAfter(J));};t.prototype._handlePrevious=function(i){var I=this._getFocusedDate(),J=y.call(this),N,O,S=false;switch(this._iMode){case 0:if(J>1){N=e.fromLocalJSDate(this.getAggregation("month")[0].getDate(),this.getPrimaryCalendarType());N.setDate(1);this._setFocusedDate(N);I=this._getFocusedDate();}else{I.setDate(1);}I.setDate(I.getDate()-1);this._renderMonth(S,true);break;case 1:I.setYear(I.getYear()-1);this._updateHeadersYearPrimaryText(this._oYearFormat.format(I.toUTCJSDate(),true));var P=this._getSecondaryCalendarType();if(P){O=new e(I,P);O.setMonth(0,1);this._updateHeadersYearAdditionalText(this._oYearFormatSecondary.format(O.toUTCJSDate(),true));}else{this._updateHeadersYearAdditionalText();}this._togglePrevNext(I);this._setDisabledMonths(I.getYear());this._getMonthPicker()._setYear(I.getYear());this._renderPicker(this._getMonthPicker());break;case 2:this._getYearPicker().previousPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());break;case 3:this.getAggregation("yearRangePicker").previousPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());break;}};t.prototype._handleNext=function(i){var I=this._getFocusedDate(),J=y.call(this),N,O;switch(this._iMode){case 0:if(J>1){N=e.fromLocalJSDate(this.getAggregation("month")[0].getDate(),this.getPrimaryCalendarType());N.setMonth(N.getMonth(),1);this._setFocusedDate(N);I=this._getFocusedDate();}I.setMonth(I.getMonth()+1,1);this._renderMonth(false,false,false,true);break;case 1:I.setYear(I.getYear()+1);this._updateHeadersYearPrimaryText(this._oYearFormat.format(I.toUTCJSDate(),true));var S=this._getSecondaryCalendarType();if(S){O=new e(I,S);O.setMonth(0,1);this._updateHeadersYearAdditionalText(this._oYearFormatSecondary.format(O.toUTCJSDate(),true));}else{this._updateHeadersYearAdditionalText();}this._togglePrevNext(I);this._setDisabledMonths(I.getYear());this._getMonthPicker()._setYear(I.getYear());this._renderPicker(this._getMonthPicker());break;case 2:this._getYearPicker().nextPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());break;case 3:this.getAggregation("yearRangePicker").nextPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());break;}};t.prototype._getYearString=function(){var i=this._getYearPicker(),I=i.getDomRef(),J=this._getFocusedDate(),N,O;if(i&&I&&I.style.display===""){N=Math.floor(i.getYears()/2);O=i._oItemNavigation.getItemDomRefs()[N].getAttribute("data-sap-year-start");J=e.fromLocalJSDate(i._oFormatYyyymmdd.parse(O),this.getPrimaryCalendarType());J.setDate(1);}return this._oYearFormat.format(U.getInstance(J.toUTCJSDate(),J.getCalendarType()),true);};t.prototype._getDisplayedMonths=function(I){var J=[];var N=I.getMonth();var O=y.call(this);if(O>1){for(var i=0;i<O;i++){J.push((N+i)%12);}}else{J.push(N);}return J;};t.prototype._getDisplayedSecondaryMonths=function(P,S){var i=this.getAggregation("month");var I=e.fromLocalJSDate(i[0].getDate(),P);I.setDate(1);I=new e(I,S);var J=I.getMonth();var N=e.fromLocalJSDate(i[i.length-1].getDate(),P);N.setDate(a._daysInMonth(N));N=new e(N,S);var O=N.getMonth();return{start:J,end:O};};t.prototype._closedPickers=function(){switch(this._iMode){case 0:break;case 1:this._hideMonthPicker();break;case 2:this._hideYearPicker();break;case 3:this._hideYearRangePicker();break;}};t.prototype._setDisabledMonths=function(i,I){var J=0;var N=11;if(i===this._oMinDate.getYear()){J=this._oMinDate.getMonth();}if(i===this._oMaxDate.getYear()){N=this._oMaxDate.getMonth();}if(!I){I=this._getMonthPicker();}I.setMinMax(J,N);};t.prototype._handleFocus=function(i){var I=e.fromLocalJSDate(i.getParameter("date"),this.getPrimaryCalendarType());var O=i.getParameter("otherMonth");var J=i.getParameter("restoreOldDate");if(J){if(!m(this._getFocusedDate(),I)){this._renderMonth(false,false,true);}}else{this._focusDate(I,O);}};t.prototype._getVisibleDays=function(){var i=this.getAggregation("month")[0];return i._getVisibleDays(i._getDate(),false);};t.prototype._renderMonth=function(S,I,N,J){var O=this._getFocusedDate(),P=this.getAggregation("month"),Q=false,T,V,W,i=0,X;for(i=0;i<P.length;i++){X=J?0:i;T=P[i];if(T.checkDateFocusable(O.toLocalJSDate())&&P[X].getDate()&&O.getMonth()===P[X].getDate().getMonth()){Q=true;}if(Q||P.length==1){if(!S){T.setDate(O.toLocalJSDate());}else{T.displayDate(O.toLocalJSDate());}break;}}if(!Q){W=new e(O,this.getPrimaryCalendarType());if(P.length>1){W=v.call(this,W);for(i=0;i<P.length;i++){T=P[i];V=new e(W,this.getPrimaryCalendarType());V.setMonth(W.getMonth()+i);if(!S&&a._isSameMonthAndYear(V,O)){T.setDate(O.toLocalJSDate());}else{T.displayDate(V.toLocalJSDate());}}}this._updateHeader(W);this._updateHeadersButtons();this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInTwoColumnsCSS();if(!N){this.fireStartDateChange();}}};t.prototype._showMonthPicker=function(S){var i=this._getFocusedDate(),I=this._getMonthPicker(),J=new e(this._getFocusedDate());this._iMode===2&&this._hideYearPicker(true);this._updateMonthButtonVisibility();this._renderPicker(I);if(this._bActionTriggeredFromSecondHeader){J.setDate(1);J.setMonth(J.getMonth()+1);I._setYear(J.getYear());}else{I._setYear(i.getYear());}this._showOverlay();if(!S&&this._bActionTriggeredFromSecondHeader){I.setMonth(J.getMonth());this._setDisabledMonths(J.getYear(),I);}else if(!S){I.setMonth(i.getMonth());this._setDisabledMonths(i.getYear(),I);}this._iMode=1;this._togglePrevNext(i,false);this._setHeaderText(this._getFocusedDate());};t.prototype._renderPicker=function(P){var i=sap.ui.getCore().createRenderManager(),$=this.$("content");if($[0]){i.renderControl(P);i.flush($[0],false,true);i.destroy();}};t.prototype._hideMonthPicker=function(S){var I=this._getMonthPicker();this._iMode=0;I.$().css("display","none");this._hideOverlay();if(!S){this._renderMonth();if(y.call(this)>1){var J=this.getAggregation("month");for(var i=0;i<J.length;i++){var N=J[i];q(N._oItemNavigation.getItemDomRefs()[N._oItemNavigation.getFocusedIndex()]).attr("tabindex","0");}}}this._updateHeadersButtons();this._togglePrevNext(this._getFocusedDate(),true);this._bActionTriggeredFromSecondHeader=false;};t.prototype._showYearPicker=function(){var i=this._getFocusedDate(),I=this._getYearPicker(),J,N;this._iMode===1&&this._hideMonthPicker(true);I.getDomRef()?I.$().css("display",""):this._renderPicker(I);this._showOverlay();I.setDate(i.toLocalJSDate());if(y.call(this)==1){J=this.getAggregation("month")[0];N=J.$("days").find(".sapUiCalItem");if(N.length==28){I.$().addClass("sapUiCalYearNoTop");}else{I.$().removeClass("sapUiCalYearNoTop");}}this._togglePrevNexYearPicker();this._iMode=2;if(this._isTwoMonthsInOneColumn()){this._updateActiveHeaderYearButtonVisibility();}else{this._updateHeadersButtons();}if(this._bActionTriggeredFromSecondHeader&&this.getAggregation("month")[1].getDate().getFullYear()>this._getFocusedDate().getYear()){var S=i.toLocalJSDate();S.setFullYear(S.getFullYear()+1);I.setDate(S);this._updateHeadersYearPrimaryText(this._getYearString());}else{I.setDate(i.toLocalJSDate());this._updateHeadersYearPrimaryText(this._getYearString());}};t.prototype._hideYearPicker=function(S){this._iMode=0;var I=this._getYearPicker();I.$().css("display","none");this._hideOverlay();if(!S){this._renderMonth();if(y.call(this)>1){var J=this.getAggregation("month");for(var i=0;i<J.length;i++){var N=J[i];q(N._oItemNavigation.getItemDomRefs()[N._oItemNavigation.getFocusedIndex()]).attr("tabindex","0");}}}this._updateActiveHeaderYearButtonVisibility();this._togglePrevNext(this._getFocusedDate(),true);this._bActionTriggeredFromSecondHeader=false;};t.prototype._focusDate=function(i,O,N){var I;var J=false;var P=false;if(i.isBefore(this._oMinDate)){I=this._oMinDate;J=true;}else if(i.isAfter(this._oMaxDate)){I=this._oMaxDate;J=true;}else{I=i;}if(this._focusDateExtend){P=this._focusDateExtend(i,O,N);}var Q=I.isBefore(this._getFocusedDate());this._setFocusedDate(I);if(J||O){this._renderMonth(false,Q,N);}if(P){this.fireStartDateChange();}};t.prototype._invalidateMonth=function(O){this._sInvalidateMonth=undefined;var I=this.getAggregation("month");if(I){for(var i=0;i<I.length;i++){var J=I[i];J._bDateRangeChanged=true;J._bInvalidateSync=true;J._bNoFocus=true;J.invalidate(O);J._bInvalidateSync=undefined;}}this._bDateRangeChanged=undefined;};t.prototype._setHeaderText=function(i){var I=this.getAggregation("header");var S=this.getAggregation("secondMonthHeader");var J=this._getLocaleData();var N=[];var O=[];var P=[];var Q=[];var T;var V=false;var W;var X;var Z;var $;var a1;var b1=this.getPrimaryCalendarType();var c1=this._getSecondaryCalendarType();var d1="";if(this._bLongMonth||!this._bNamesLengthChecked){N=J.getMonthsStandAlone("wide",b1);}else{V=true;N=J.getMonthsStandAlone("abbreviated",b1);O=J.getMonthsStandAlone("wide",b1);}if(c1){P=J.getMonthsStandAlone("abbreviated",c1);Q=J.getMonthsStandAlone("wide",c1);var e1=this._getDisplayedSecondaryMonths(b1,c1);if(e1.start==e1.end){Z=P[e1.start];d1=Q[e1.start];}else{a1=J.getIntervalPattern();Z=a1.replace(/\{0\}/,P[e1.start]).replace(/\{1\}/,P[e1.end]);d1=a1.replace(/\{0\}/,Q[e1.start]).replace(/\{1\}/,Q[e1.end]);}}I.setAdditionalTextButton1(Z);I._setAdditionalTextButton3(Z);S.setAdditionalTextButton1(Z);var f1=this._getDisplayedMonths(i);this._sFirstMonthName=W=N[f1[0]];X=N[f1[f1.length-1]];if(f1.length>1&&!this._bShowOneMonth){if(!a1){a1=J.getIntervalPattern();}Z=a1.replace(/\{0\}/,W).replace(/\{1\}/,X);T=O.length?a1.replace(/\{0\}/,O[f1[0]]).replace(/\{1\}/,O[f1[f1.length-1]]):Z;if(this._isTwoMonthsInTwoColumns()||this._isTwoMonthsInOneColumn()){Z=W;}}else{Z=W;T=O[f1[0]]||Z;}if(!this._getSucessorsPickerPopup()&&d1){T+=", "+d1;}I.setTextButton1(Z);I.setAriaLabelButton1(T);I._setTextButton3(X);I._setAriaLabelButton3(X);S.setTextButton1(X);S.setAriaLabelButton1(X);var g1=new e(i,b1);g1.setDate(1);$=this._oYearFormat.format(g1.toUTCJSDate(),true);if(g1.getMonth()===11){this._updateHeadersYearPrimaryText($,(parseInt($)+1).toString());}else{this._updateHeadersYearPrimaryText($,$);}if(c1){g1=new e(g1,c1);this._updateHeadersYearAdditionalText(this._oYearFormatSecondary.format(g1.toUTCJSDate(),true));}else{this._updateHeadersYearAdditionalText();}return{sMonth:Z,sYear:$,sAriaLabel:T,bShort:V};};t.prototype._handleButton1=function(i){if(this._iMode!=1){this._setIsSecondHeaderButtonAction(i);this._showMonthPicker();}else{this._hideMonthPicker();}};t.prototype._handleButton2=function(i){if(this._iMode<=1){this._setIsSecondHeaderButtonAction(i);this._showYearPicker();}else{this._hideYearPicker();this._showYearRangePicker();}};t.prototype._selectMonth=function(){var i=new e(this._getFocusedDate(),this.getPrimaryCalendarType()),I=this._getMonthPicker(),J=I._focusedMonth||I._focusedMonth===0?I._focusedMonth:I.getMonth(),S;if(!!I._iYear){S=new e(I._iYear,J-1,1);}else{S=new e(this._getFocusedDate()._oUDate.getFullYear(),J-1,1);}if(this._bActionTriggeredFromSecondHeader&&S.getYear()>=a._minDate().getYear()){i.setYear(S.getYear());i.setMonth(S.getMonth());J=i.getMonth();}else if(i.getYear()===a._maxDate().getYear()&&J===11){J-=1;i.setMonth(J);}else{i.setMonth(J);}if(J!=i.getMonth()){i.setDate(0);}this._focusDate(i,true);this._hideMonthPicker();};t.prototype._getSucessorsPickerPopup=function(){return this.getPickerPopup&&this.getPickerPopup();};t.prototype._selectYear=function(){var i=new e(this._getFocusedDate(),this.getPrimaryCalendarType()),I=i.getMonth(),J=this._getYearPicker(),N=e.fromLocalJSDate(J.getDate(),this.getPrimaryCalendarType());if(!this._bActionTriggeredFromSecondHeader){N.setMonth(I,i.getDate());}else{N.setYear(I===11?N.getYear()-1:N.getYear());N.setMonth(I,i.getDate());}i=N;this._focusDate(i,true);this._hideYearPicker();this._updateHeadersButtons();this._setHeaderText(e.fromLocalJSDate(this.getAggregation("month")[0].getDate(),this.getPrimaryCalendarType()));};t.prototype._selectYearRange=function(){var i=this.getAggregation("yearRangePicker"),I=this.getAggregation("header"),J=i.getRangeSize(),P=this.getPrimaryCalendarType(),S=e.fromLocalJSDate(i.getDate(),P),N=new e(S.getYear()+J-1,0,1,P),O=this._getFocusedDate(),Q,T;S.setMonth(0,1);O.setYear(S.getYear()+Math.floor(J/2));this._setFocusedDate(O);this._hideYearRangePicker();this._showYearPicker();Q=this._oYearFormat.format(U.getInstance(S.toUTCJSDate(),S.getCalendarType()),true);T=this._oYearFormat.format(U.getInstance(N.toUTCJSDate(),N.getCalendarType()),true);I.setTextButton2(Q+" - "+T);I._setTextButton4(Q+" - "+T);};t.prototype._showYearRangePicker=function(){var i=this.getAggregation("yearRangePicker"),I=this._getYearPicker(),J=e.fromLocalJSDate(I.getFirstRenderedDate(),this.getPrimaryCalendarType());i.getDomRef()?i.$().css("display",""):this._renderPicker(i);this._showOverlay();i.setDate(J.toLocalJSDate());this._togglePrevNexYearPicker();this._iMode=3;this._updateHeadersButtons();};t.prototype._hideYearRangePicker=function(){this._iMode=0;this.getAggregation("yearRangePicker").$().css("display","none");this._hideOverlay();this._bActionTriggeredFromSecondHeader=false;};t.prototype._showOverlay=function(){this.$("contentOver").css("display","");};t.prototype._hideOverlay=function(){this.$("contentOver").css("display","none");};t.prototype._setColumns=function(i){this._iColumns=i;return this;};t.prototype._getColumns=function(){return this._iColumns;};t.prototype._updateMonthButtonVisibility=function(){var i=this._getActiveHeaderAggregation();if(this._bActionTriggeredFromSecondHeader){this._isTwoMonthsInOneColumn()?i.setVisibleButton1(!i.getVisibleButton1()):i._setVisibleButton3(!i._getVisibleButton3());}else{i.setVisibleButton1(false);}return this;};t.prototype._updateActiveHeaderYearButtonVisibility=function(){var i=this._getActiveHeaderAggregation();if(this._bActionTriggeredFromSecondHeader){this._isTwoMonthsInOneColumn()?i.setVisibleButton1(!i.getVisibleButton1()):i._setVisibleButton3(!i._getVisibleButton3());}else{i.setVisibleButton1(!i.getVisibleButton1());}return this;};t.prototype._updateHeadersButtonsHelper=function(i,I,J,N){var O=this.getAggregation("header"),S=this.getAggregation("secondMonthHeader");O.setVisibleButton1(i);O.setVisibleButton2(I);O._setVisibleButton3(J);O._setVisibleButton4(N);if(S.getVisible()){S.setVisibleButton1(i);S.setVisibleButton2(I);S._setVisibleButton3(J);S._setVisibleButton4(N);}};t.prototype._updateHeadersButtons=function(){var S=this.getAggregation("secondMonthHeader");if(this._isTwoMonthsInOneColumn()){S.setVisible(true);if(this._iMode===2){this._updateHeadersButtonsHelper(false,true,false,false);}else if(this._iMode===3){this._updateHeadersButtonsHelper(false,false,false,false);}else{this._updateHeadersButtonsHelper(true,true,false,false);}}else if(this._isTwoMonthsInTwoColumns()){S.setVisible(false);if(this._iMode===2){this._bActionTriggeredFromSecondHeader?this._updateHeadersButtonsHelper(true,true,false,true):this._updateHeadersButtonsHelper(false,true,true,true);}else if(this._iMode===3){this._updateHeadersButtonsHelper(false,false,false,false);}else if(this._iMode===1){this._bActionTriggeredFromSecondHeader?this._updateHeadersButtonsHelper(true,true,false,true):this._updateHeadersButtonsHelper(false,true,true,true);}else{this._updateHeadersButtonsHelper(true,true,true,true);}}else{S.setVisible(false);if(this._iMode===2){this._updateHeadersButtonsHelper(false,true,false,false);}else if(this._iMode===3){this._updateHeadersButtonsHelper(false,false,false,false);}else{this._updateHeadersButtonsHelper(true,true,false,false);}}if(this._getSucessorsPickerPopup()){this.getAggregation("header").setVisibleButton2(false);}};t.prototype._setPrimaryHeaderMonthButtonText=function(){var i=this.getAggregation("header");if(this._isTwoMonthsInOneColumn()||this._isTwoMonthsInTwoColumns()){i.setTextButton1(this._sFirstMonthName);}};t.prototype._toggleTwoMonthsInTwoColumnsCSS=function(){if(this._isTwoMonthsInTwoColumns()){if(r.getConfiguration().getLocale().getLanguage().toLowerCase()==="ja"||r.getConfiguration().getLocale().getLanguage().toLowerCase()==="zh"){this.addStyleClass("sapUiCalTwoMonthsTwoColumnsJaZh");this.removeStyleClass("sapUiCalTwoMonthsTwoColumns");}else{this.addStyleClass("sapUiCalTwoMonthsTwoColumns");this.removeStyleClass("sapUiCalTwoMonthsTwoColumnsJaZh");}}else{this.removeStyleClass("sapUiCalTwoMonthsTwoColumnsJaZh");this.removeStyleClass("sapUiCalTwoMonthsTwoColumns");}};t.prototype._isTwoMonthsInOneColumn=function(){var i=y.call(this);return this._getColumns()===1&&i===2;};t.prototype._isTwoMonthsInTwoColumns=function(){var i=y.call(this);return this._getColumns()===2&&i===2;};t.prototype._updateHeadersYearPrimaryText=function(i,S){var I=this._getYearPicker(),J=this.getAggregation("header"),N=this.getAggregation("secondMonthHeader"),O=i,P=i,Q=S||i,T=this.getPrimaryCalendarType();if(this._iMode===2&&I&&I.getDomRef()){var V=I._oItemNavigation.getItemDomRefs(),W=V[0].getAttribute("data-sap-year-start"),X=V[V.length-1].getAttribute("data-sap-year-start"),Z=e.fromLocalJSDate(I._oFormatYyyymmdd.parse(W),T),$=e.fromLocalJSDate(I._oFormatYyyymmdd.parse(X),T),a1,b1;Z.setDate(1);$.setDate(1);a1=this._oYearFormat.format(U.getInstance(Z.toUTCJSDate(),Z.getCalendarType()),true);b1=this._oYearFormat.format(U.getInstance($.toUTCJSDate(),$.getCalendarType()),true);if(this._bActionTriggeredFromSecondHeader){Q=a1+" - "+b1;}else{P=a1+" - "+b1;}}J._setTextButton4(Q);J._setAriaLabelButton4(Q);N.setTextButton2(Q);N.setAriaLabelButton2(Q);J.setTextButton2(P);J.setAriaLabelButton2(O);};t.prototype._updateHeadersYearAdditionalText=function(i){var I=this.getAggregation("header"),S=this.getAggregation("secondMonthHeader"),J=I.getAriaLabelButton2();if(i){J+=", "+i;I.setAriaLabelButton2(J);}I.setAdditionalTextButton2(i);I._setAdditionalTextButton4(i);S.setAdditionalTextButton2(i);};t.prototype._adjustYearRangeDisplay=function(){var i=this.getAggregation("yearRangePicker");if(!this._getSucessorsPickerPopup()){switch(this.getPrimaryCalendarType()){case s.Japanese:i.setColumns(1);i.setYears(4);break;case s.Gregorian:i.setColumns(3);i.setYears(9);break;default:i.setColumns(2);i.setYears(8);}}};t.prototype._getSpecialDates=function(){var P=this.getParent();if(this._oSpecialDatesControlOrigin){return this._oSpecialDatesControlOrigin._getSpecialDates();}if(P&&P._getSpecialDates){return P._getSpecialDates();}else{var I=this.getSpecialDates();for(var i=0;i<I.length;i++){var N=I[i].getSecondaryType()===l.CalendarDayType.NonWorking&&I[i].getType()!==l.CalendarDayType.NonWorking;if(N){var J=new b();J.setType(I[i].getSecondaryType());J.setStartDate(I[i].getStartDate());if(I[i].getEndDate()){J.setEndDate(I[i].getEndDate());}I.push(J);}}return I;}};function _(){var S=this.getSelectedDates();var i=this.getPrimaryCalendarType();if(S&&S[0]&&S[0].getStartDate()){this._oFocusedDate=e.fromLocalJSDate(S[0].getStartDate(),i);}else{this._oFocusedDate=e.fromLocalJSDate(new Date(),i);}if(this._oFocusedDate.isBefore(this._oMinDate)){this._oFocusedDate=new e(this._oMinDate,i);}else if(this._oFocusedDate.isAfter(this._oMaxDate)){this._oFocusedDate=new e(this._oMaxDate,i);}}function u(I){var W=I.size.width;if(W<=0){return;}var O=this._iSize;if(W<this._iBreakPointTablet){this._iSize=0;}else if(W<this._iBreakPointDesktop){this._iSize=1;}else if(W<this._iBreakPointLargeDesktop){this._iSize=2;}else{this._iSize=3;}var J=y.call(this);if(O!=this._iSize||this._bInitMonth){switch(this._iSize){case 1:this._setColumns(2);break;case 2:this._setColumns(3);break;case 3:this._setColumns(4);break;default:this._setColumns(1);break;}if(J<this._getColumns()){this._setColumns(J);}if(this._getColumns()>2&&J>this._getColumns()){var N=this._getColumns();var P=0.0;var Q=this._getColumns();while(N>=2){var S=J%N;if(S==0){Q=N;break;}else{var T=S/N;if(T>P){P=T;Q=N;}}N--;}this._setColumns(Q);}var V;var X=this.getAggregation("month");if(this._getColumns()>1){V=100/this._getColumns()+"%";this.$("content").removeClass("sapUiCalContentSingle");}else{V="100%";this.$("content").addClass("sapUiCalContentSingle");}for(var i=0;i<X.length;i++){var Z=X[i];Z.setWidth(V);}}this._updateHeadersButtons();this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInTwoColumnsCSS();}function v(i){var I=new e(i,this.getPrimaryCalendarType());I.setDate(1);var J=y.call(this);if(J<=12){var N=i.getMonth();if(12%J>0&&N+J>11){N=12-J;}I.setMonth(N);}return I;}function w(){var i,I,J;if(!this._bNamesLengthChecked){this._showMonthPicker(true);this._hideMonthPicker(true);i=this._getMonthPicker();this._bLongMonth=i._bLongMonth;this._bNamesLengthChecked=true;if(!this._bLongMonth){I=this.getAggregation("month");J;if(I.length>1){J=e.fromLocalJSDate(I[0].getDate(),this.getPrimaryCalendarType());}else{J=this._getFocusedDate();}this._setHeaderText(J);this._updateHeadersButtons();this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInTwoColumnsCSS();}}}function x(i,S){var I,J;if(!i){return;}I=e.fromLocalJSDate(i,this.getPrimaryCalendarType());J=I.getYear();a._checkYearInValidRange(J);if(a._isOutside(I,this._oMinDate,this._oMaxDate)){throw new Error("Date must not be in valid range (minDate and maxDate); "+this);}this._setFocusedDate(I);if(this.getDomRef()&&this._iMode==0){this._renderMonth(S,false,true,true);}}function y(){if(f.system.phone){return 1;}else{return this.getMonths();}}function z(i){this.fireEvent("_renderMonth",{days:i.getParameter("days")});}function A(I){if(y.call(this)>1){var J=this.getAggregation("month");for(var i=0;i<J.length;i++){var N=J[i];if(N.getId()!=I.oSource.getId()){N._updateSelection();}}}this._oSelectedMonth=I.oSource;this.fireSelect();}function B(I){var J,N,i;if(y.call(this)>1){J=this.getAggregation("month");for(i=0;i<J.length;i++){N=J[i];if(N.getId()!=I.oSource.getId()){N._bindMousemove();}}}}function E(I){var J,N,i;if(y.call(this)>1){J=this.getAggregation("month");for(i=0;i<J.length;i++){N=J[i];if(N.getId()!=I.oSource.getId()){N._unbindMousemove();}}}}function F(i){var O=i.getParameter("offset");if(O>0){this._handleNext(i);}if(O<0){this._handlePrevious(i);}}function G(){this._updateHeadersYearPrimaryText(this._getYearString());}return t;});
